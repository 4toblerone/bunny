{
    "sbg:canvas_x": 253,
    "sbg:appVersion": [
        "sbg:draft-2"
    ],
    "sbg:revisionNotes": null,
    "sbg:createdBy": "bixqa",
    "label": "RNA-Seq Alignment - HISAT2",
    "sbg:toolkit": "",
    "sbg:id": "bixqa/qa-load-2017-07-31-18/rna-seq-alignment-hisat2-2-0-1/6",
    "description": "This pipeline performs the first step of RNA-Seq analysis - alignment to a reference genome and transcriptome. HISAT2 is a fast and sensitive alignment program for mapping next-generation sequencing reads (whole-genome, transcriptome, and exome sequencing data) against the general human population (as well as against a single reference genome). Based on GCSA (an extension of BWT for a graph), we designed and implemented a graph FM index (GFM), an original approach and its first implementation to the best of our knowledge. In addition to using one global GFM index that represents general population, HISAT2 uses a large set of small GFM indexes that collectively cover the whole genome (each index representing a genomic region of 56 Kbp, with 55,000 indexes needed to cover human population). These small indexes (called local indexes) combined with several alignment strategies enable effective alignment of sequencing reads. This new indexing scheme is called Hierarchical Graph FM index (HGFM). We have developed HISAT 2 based on the HISAT and Bowtie2 implementations. HISAT2 outputs alignments in SAM format, enabling interoperation with a large number of other tools (e.g. SAMtools, GATK) that use SAM.\n\n__Required inputs__\n\nThis workflow has two required inputs:\n\nInput fastq reads (ID: reads) - HISAT2 accepts one fastq file per sample for single-end data, or two files per sample for paired-end data. NOTE: For paired-end reads it is crucial to set the metadata 'paired-end' field as 1 for one input file, as 2 for the other input file.\n\nGenome fasta files (ID: reference_files) - reference sequence to which to align the reads.\n\n__Optional inputs__\n\nSplice sites file (generated by HISAT2 ExtractSpliceSites),\nExons file (generated by HISAT2 ExtractExons),\nSNP file (generated by HISAT2 ExtractSNPs).\n\n__Outputs__\n\nThis workflow generates six output files:\n\nIndex files (ID: output_indexed),\nAligned reads in SAM format (ID: alignment_file),\nAligned reads in sorted BAM format (ID: sorted_bam),\nNovel splice sited detected by HISAT2 (ID: novel_ss_out),\nHISAT2 metrics file (ID: metrics_file), \nAlignment summary metrics reported by Picard CollectAlignmentSummaryMetrics (ID: summary_metrics).\n\n__Common issues__\n\nFor paired-end alignments it is crucial to set the metadata 'paired-end' field as 1 and 2 respectively for the two input fastq files, otherwise the task will fail.",
    "sbg:canvas_y": 146,
    "requirements": [],
    "sbg:modifiedBy": "bixqa",
    "steps": [
        {
            "sbg:x": 871.6666666666672,
            "run": {
                "y": -27.887751261393245,
                "sbg:toolkitVersion": "1.140",
                "sbg:createdBy": "bix-demo",
                "label": "Picard CollectAlignmentSummaryMetrics",
                "appUrl": "/u/bix-demo/picard-1-140-demo/apps/#bix-demo/picard-1-140-demo/picard-collectalignmentsummarymetrics-1-140/3",
                "sbg:modifiedBy": "bix-demo",
                "outputs": [
                    {
                        "description": "File to which the output will be written.",
                        "type": [
                            "File"
                        ],
                        "outputBinding": {
                            "glob": "*.summary_metrics.txt",
                            "sbg:inheritMetadataFrom": "#input_bam",
                            "secondaryFiles": [],
                            "sbg:metadata": {}
                        },
                        "sbg:fileTypes": "TXT",
                        "label": "Summary metrics",
                        "id": "#summary_metrics"
                    }
                ],
                "successCodes": [],
                "requirements": [
                    {
                        "id": "#cwl-js-engine",
                        "class": "ExpressionEngineRequirement",
                        "requirements": [
                            {
                                "class": "DockerRequirement",
                                "dockerPull": "rabix/js-engine"
                            }
                        ]
                    }
                ],
                "sbg:revisionsInfo": [
                    {
                        "sbg:modifiedOn": 1450911255,
                        "sbg:revision": 0,
                        "sbg:revisionNotes": null,
                        "sbg:modifiedBy": "bix-demo"
                    },
                    {
                        "sbg:modifiedOn": 1450911256,
                        "sbg:revision": 1,
                        "sbg:revisionNotes": null,
                        "sbg:modifiedBy": "bix-demo"
                    },
                    {
                        "sbg:modifiedOn": 1450911257,
                        "sbg:revision": 2,
                        "sbg:revisionNotes": null,
                        "sbg:modifiedBy": "bix-demo"
                    },
                    {
                        "sbg:modifiedOn": 1472811193,
                        "sbg:revision": 3,
                        "sbg:revisionNotes": "[].concat(input_bam)[0].path",
                        "sbg:modifiedBy": "bix-demo"
                    }
                ],
                "sbg:toolkit": "Picard",
                "sbg:sbgMaintained": false,
                "sbg:revision": 3,
                "sbg:toolAuthor": "Broad Institute",
                "sbg:id": "admin/sbg-public-data/picard-collectalignmentsummarymetrics-1-140/3",
                "x": 871.6666666666672,
                "sbg:job": {
                    "allocatedResources": {
                        "mem": 2048,
                        "cpu": 1
                    },
                    "inputs": {
                        "input_bam": {
                            "path": "/root/folder/example.bam"
                        },
                        "metric_accumulation_level": [
                            "ALL_READS"
                        ],
                        "memory_per_job": 0,
                        "reference": {
                            "path": "/root/directory/example.fasta"
                        }
                    }
                },
                "sbg:categories": [
                    "SAM/BAM-Processing",
                    "Quality-Control",
                    "Quantification"
                ],
                "stdout": "",
                "sbg:license": "MIT License, Apache 2.0 Licence",
                "sbg:project": "bix-demo/picard-1-140-demo",
                "sbg:createdOn": 1450911255,
                "class": "CommandLineTool",
                "sbg:contributors": [
                    "bix-demo"
                ],
                "cwlVersion": "sbg:draft-2",
                "description": "Picard CollectAlignmentSummaryMetrics assesses the quality of alignment by analyzing a SAM or BAM file. It compares it with the reference file (FASTA) and provides alignment statistics, such as the number of input reads and the percent of reads that are mapped. It produces a file which contains summary alignment metrics from a SAM or BAM file.\n\nNote: This tool requires the exact same FASTA file as the one to which raw reads were aligned.",
                "sbg:latestRevision": 3,
                "sbg:image_url": null,
                "sbg:links": [
                    {
                        "label": "Homepage",
                        "id": "http://broadinstitute.github.io/picard/index.html"
                    },
                    {
                        "label": "Source Code",
                        "id": "https://github.com/broadinstitute/picard/releases/tag/1.140"
                    },
                    {
                        "label": "Wiki",
                        "id": "http://broadinstitute.github.io/picard/"
                    },
                    {
                        "label": "Download",
                        "id": "https://github.com/broadinstitute/picard/zipball/master"
                    },
                    {
                        "label": "Publication",
                        "id": "http://broadinstitute.github.io/picard/"
                    }
                ],
                "arguments": [
                    {
                        "separate": false,
                        "prefix": "OUTPUT=",
                        "valueFrom": {
                            "script": "{\n  if ($job.inputs.input_bam)\n  {\n    filename = [].concat($job.inputs.input_bam)[0].path\n    filebase = filename.split('.').slice(0, -1)\n\n    return filebase.concat(\"summary_metrics.txt\").join(\".\").replace(/^.*[\\\\\\/]/, '')\n  }\n}\n",
                            "class": "Expression",
                            "engine": "#cwl-js-engine"
                        },
                        "position": 3
                    }
                ],
                "sbg:validationErrors": [],
                "baseCommand": [
                    "java",
                    {
                        "script": "{   \n  if($job.inputs.memory_per_job){\n    return '-Xmx'.concat($job.inputs.memory_per_job, 'M')\n  }   \n  \treturn '-Xmx2048M'\n}",
                        "class": "Expression",
                        "engine": "#cwl-js-engine"
                    },
                    "-jar",
                    "/opt/picard-tools-1.140/picard.jar",
                    "CollectAlignmentSummaryMetrics"
                ],
                "hints": [
                    {
                        "dockerImageId": "eab0e70b6629",
                        "class": "DockerRequirement",
                        "dockerPull": "images.sbgenomics.com/mladenlsbg/picard:1.140"
                    },
                    {
                        "class": "sbg:CPURequirement",
                        "value": 1
                    },
                    {
                        "class": "sbg:MemRequirement",
                        "value": {
                            "script": "{\n  if($job.inputs.memory_per_job){\n  \treturn $job.inputs.memory_per_job\n  }\n  \treturn 2048\n}",
                            "class": "Expression",
                            "engine": "#cwl-js-engine"
                        }
                    }
                ],
                "stdin": "",
                "sbg:revisionNotes": "[].concat(input_bam)[0].path",
                "temporaryFailCodes": [],
                "sbg:modifiedOn": 1472811193,
                "inputs": [
                    {
                        "description": "Control verbosity of logging. Default value: INFO. This option can be set to 'null' to clear the default value. Possible values: {ERROR, WARNING, INFO, DEBUG}.",
                        "type": [
                            "null",
                            {
                                "symbols": [
                                    "ERROR",
                                    "WARNING",
                                    "INFO",
                                    "DEBUG"
                                ],
                                "name": "verbosity",
                                "type": "enum"
                            }
                        ],
                        "sbg:toolDefaultValue": "INFO",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "prefix": "VERBOSITY=",
                            "position": 6
                        },
                        "sbg:category": "",
                        "label": "Verbosity",
                        "id": "#verbosity",
                        "required": false
                    },
                    {
                        "description": "Validation stringency for all SAM files read by this program. Setting stringency to SILENT can improve performance when processing a BAM file in which variable-length data (read, qualities, tags) do not otherwise need to be decoded. Default value: STRICT. This option can be set to 'null' to clear the default value. Possible values: {STRICT, LENIENT, SILENT}.",
                        "type": [
                            "null",
                            {
                                "symbols": [
                                    "STRICT",
                                    "LENIENT",
                                    "SILENT"
                                ],
                                "name": "validation_stringency",
                                "type": "enum"
                            }
                        ],
                        "sbg:toolDefaultValue": "SILENT",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "prefix": "VALIDATION_STRINGENCY=",
                            "valueFrom": {
                                "script": "{\n  if ($job.inputs.validation_stringency)\n  {\n    return $job.inputs.validation_stringency\n  }\n  else\n  {\n    return \"SILENT\"\n  }\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            },
                            "position": 4
                        },
                        "label": "Validation stringency",
                        "id": "#validation_stringency",
                        "required": false
                    },
                    {
                        "description": "Stop after processing N reads, mainly for debugging. Default value: 0. This option can be set to 'null' to clear the default value.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "0",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "prefix": "STOP_AFTER=",
                            "position": 9
                        },
                        "sbg:category": "",
                        "label": "Stop after",
                        "id": "#stop_after",
                        "required": false
                    },
                    {
                        "sbg:altPrefix": "R",
                        "sbg:fileTypes": "FASTA",
                        "type": [
                            "null",
                            "File"
                        ],
                        "description": "Reference sequence file. Note that while this argument is not required, without it only a small subset of the metrics will be calculated.  Default value: null.",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "prefix": "REFERENCE_SEQUENCE=",
                            "position": 3
                        },
                        "sbg:category": "File inputs",
                        "label": "Reference sequence",
                        "id": "#reference",
                        "required": false
                    },
                    {
                        "description": "This parameter indicates whether to suppress job-summary info on System.err. Default value: false. This option can be set to 'null' to clear the default value. Possible values: {true, false}.",
                        "type": [
                            "null",
                            {
                                "symbols": [
                                    "true",
                                    "false"
                                ],
                                "name": "quiet",
                                "type": "enum"
                            }
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "prefix": "QUIET=",
                            "position": 4
                        },
                        "sbg:category": "",
                        "label": "Quiet",
                        "id": "#quiet",
                        "required": false
                    },
                    {
                        "sbg:altPrefix": "LEVEL",
                        "description": "This parameter indicates the level(s) at which to accumulate metrics. Default value: [ALL_READS]. This option can be set to 'null' to clear the default value. Possible values: {ALL_READS, SAMPLE, LIBRARY, READ_GROUP}. This option may be specified 0 or more times. This option can be set to 'null' to clear the default list.",
                        "type": [
                            "null",
                            {
                                "type": "array",
                                "items": {
                                    "symbols": [
                                        "ALL_READS",
                                        "SAMPLE",
                                        "LIBRARY",
                                        "READ_GROUP"
                                    ],
                                    "name": "metric_accumulation_level",
                                    "type": "enum"
                                }
                            }
                        ],
                        "sbg:toolDefaultValue": "ALL_READS",
                        "inputBinding": {
                            "itemSeparator": null,
                            "separate": false,
                            "prefix": "METRIC_ACCUMULATION_LEVEL=",
                            "sbg:cmdInclude": true,
                            "position": 8
                        },
                        "sbg:category": "",
                        "label": "Metric accumulation level",
                        "id": "#metric_accumulation_level",
                        "required": false
                    },
                    {
                        "description": "Amount of RAM memory to be used per job. Defaults to 2048 MB for single threaded jobs.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "2048",
                        "label": "Memory per job",
                        "id": "#memory_per_job",
                        "required": false
                    },
                    {
                        "description": "When writing SAM files that need to be sorted, this parameter will specify the number of records stored in RAM before spilling to disk. Increasing this number reduces the number of file handles needed to sort a SAM file, and increases the amount of RAM needed. Default value: 500000. This option can be set to 'null' to clear the default value.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "500000",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "prefix": "MAX_RECORDS_IN_RAM=",
                            "position": 4
                        },
                        "sbg:category": "",
                        "label": "Max records in RAM",
                        "id": "#max_records_in_ram",
                        "required": false
                    },
                    {
                        "description": "Paired end reads above this insert size will be considered chimeric along with inter-chromosomal pairs. Default value: 100000. This option can be set to 'null' to clear the default value.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "100000",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "prefix": "MAX_INSERT_SIZE=",
                            "position": 9
                        },
                        "sbg:category": "",
                        "label": "Max insert size",
                        "id": "#max_insert_size",
                        "required": false
                    },
                    {
                        "sbg:altPrefix": "BS",
                        "description": "This parameter indicates whether the SAM or BAM file consists of bisulfite sequenced reads. Default value: false. This option can be set to 'null' to clear the default value. Possible values: {true, false}.",
                        "type": [
                            "null",
                            {
                                "symbols": [
                                    "true",
                                    "false"
                                ],
                                "name": "is_bisulfite_sequenced",
                                "type": "enum"
                            }
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "prefix": "BS=",
                            "position": 8
                        },
                        "sbg:category": "",
                        "label": "Is bisulfite sequenced",
                        "id": "#is_bisulfite_sequenced",
                        "required": false
                    },
                    {
                        "sbg:altPrefix": "I",
                        "sbg:fileTypes": "BAM, SAM",
                        "type": [
                            "File"
                        ],
                        "description": "Input SAM or BAM file.  Required.",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "prefix": "INPUT=",
                            "position": 0
                        },
                        "sbg:category": "File inputs",
                        "label": "Input file",
                        "id": "#input_bam",
                        "required": true
                    },
                    {
                        "description": "Compression level for all compressed files created (e.g. BAM and GELI). Default value: 5. This option can be set to 'null' to clear the default value.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "5",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "prefix": "COMPRESSION_LEVEL=",
                            "position": 4
                        },
                        "sbg:category": "",
                        "label": "Compression level",
                        "id": "#compression_level",
                        "required": false
                    },
                    {
                        "sbg:altPrefix": "AS",
                        "description": "If this parameter is set to true, the sort order in the header file will be ignored. Default value: true. This option can be set to 'null' to clear the default value. Possible values: {true, false}.",
                        "type": [
                            "null",
                            {
                                "symbols": [
                                    "true",
                                    "false"
                                ],
                                "name": "assume_sorted",
                                "type": "enum"
                            }
                        ],
                        "sbg:toolDefaultValue": "true",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "ASSUME_SORTED=",
                            "separate": false
                        },
                        "sbg:category": "",
                        "label": "Assume sorted",
                        "id": "#assume_sorted",
                        "required": false
                    },
                    {
                        "description": "List of adapter sequences to use when processing the alignment metrics. Default value: [AATGATACGGCGACCACCGAGATCTACACTCTTTCCCTACACGACGCTCTTCCGATCT, AGATCGGAAGAGCTCGTATGCCGTCTTCTGCTTG, AATGATACGGCGACCACCGAGATCTACACTCTTTCCCTACACGACGCTCTTCCGATCT, AGATCGGAAGAGCGGTTCAGCAGGAATGCCGAGACCGATCTCGTATGCCGTCTTCTGCTTG, AATGATACGGCGACCACCGAGATCTACACTCTTTCCCTACACGACGCTCTTCCGATCT, AGATCGGAAGAGCACACGTCTGAACTCCAGTCACNNNNNNNNATCTCGTATGCCGTCTTCTGCTTG]. This option can be set to 'null' to clear the default value. This option may be specified 0 or more times. This option can be set to 'null' to clear the default list.",
                        "type": [
                            "null",
                            {
                                "type": "array",
                                "items": "string"
                            }
                        ],
                        "sbg:toolDefaultValue": "AATGATACGGCGACCACCGAGATCTACACTCTTTCCCTACACGACGCTCTTCCGATCT",
                        "inputBinding": {
                            "itemSeparator": null,
                            "separate": false,
                            "prefix": "ADAPTER_SEQUENCE=",
                            "sbg:cmdInclude": true,
                            "position": 8
                        },
                        "sbg:category": "",
                        "label": "Adapter sequence",
                        "id": "#adapter_sequence",
                        "required": false
                    }
                ],
                "id": "bix-demo/picard-1-140-demo/picard-collectalignmentsummarymetrics-1-140/3",
                "sbg:cmdPreview": "java -Xmx2048M -jar /opt/picard-tools-1.140/picard.jar CollectAlignmentSummaryMetrics INPUT=/root/folder/example.bam OUTPUT=example.summary_metrics.txt"
            },
            "sbg:y": -27.887751261393245,
            "inputs": [
                {
                    "id": "#Picard_CollectAlignmentSummaryMetrics.verbosity"
                },
                {
                    "id": "#Picard_CollectAlignmentSummaryMetrics.validation_stringency"
                },
                {
                    "id": "#Picard_CollectAlignmentSummaryMetrics.stop_after"
                },
                {
                    "id": "#Picard_CollectAlignmentSummaryMetrics.reference",
                    "source": [
                        "#reference"
                    ]
                },
                {
                    "id": "#Picard_CollectAlignmentSummaryMetrics.quiet"
                },
                {
                    "id": "#Picard_CollectAlignmentSummaryMetrics.metric_accumulation_level"
                },
                {
                    "id": "#Picard_CollectAlignmentSummaryMetrics.memory_per_job"
                },
                {
                    "id": "#Picard_CollectAlignmentSummaryMetrics.max_records_in_ram"
                },
                {
                    "id": "#Picard_CollectAlignmentSummaryMetrics.max_insert_size"
                },
                {
                    "id": "#Picard_CollectAlignmentSummaryMetrics.is_bisulfite_sequenced"
                },
                {
                    "id": "#Picard_CollectAlignmentSummaryMetrics.input_bam",
                    "source": [
                        "#Picard_SortSam.sorted_bam"
                    ]
                },
                {
                    "id": "#Picard_CollectAlignmentSummaryMetrics.compression_level"
                },
                {
                    "id": "#Picard_CollectAlignmentSummaryMetrics.assume_sorted"
                },
                {
                    "id": "#Picard_CollectAlignmentSummaryMetrics.adapter_sequence"
                }
            ],
            "id": "#Picard_CollectAlignmentSummaryMetrics",
            "outputs": [
                {
                    "id": "#Picard_CollectAlignmentSummaryMetrics.summary_metrics"
                }
            ]
        },
        {
            "sbg:x": 510.0000218550367,
            "run": {
                "y": 178.77892093309748,
                "sbg:toolkitVersion": "2.0.1",
                "sbg:createdBy": "jexnaex",
                "label": "HISAT2",
                "sbg:modifiedBy": "jexnaex",
                "sbg:id": "admin/sbg-public-data/hisat2-2-0-1/2",
                "successCodes": [],
                "requirements": [
                    {
                        "id": "#cwl-js-engine",
                        "class": "ExpressionEngineRequirement",
                        "requirements": [
                            {
                                "class": "DockerRequirement",
                                "dockerPull": "rabix/js-engine"
                            }
                        ]
                    }
                ],
                "sbg:revisionsInfo": [
                    {
                        "sbg:modifiedOn": 1473013887,
                        "sbg:revision": 0,
                        "sbg:revisionNotes": null,
                        "sbg:modifiedBy": "jexnaex"
                    },
                    {
                        "sbg:modifiedOn": 1473013975,
                        "sbg:revision": 1,
                        "sbg:revisionNotes": null,
                        "sbg:modifiedBy": "jexnaex"
                    },
                    {
                        "sbg:modifiedOn": 1475234066,
                        "sbg:revision": 2,
                        "sbg:revisionNotes": null,
                        "sbg:modifiedBy": "jexnaex"
                    }
                ],
                "sbg:toolkit": "HISAT2",
                "sbg:sbgMaintained": false,
                "sbg:revision": 2,
                "sbg:toolAuthor": "Johns Hopkins University",
                "outputs": [
                    {
                        "description": "Unpaired reads that fail to align.",
                        "type": [
                            "null",
                            "File"
                        ],
                        "outputBinding": {
                            "glob": {
                                "script": "{\n  \text = $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n    if (ext == 'gz' | ext == 'bz2'){\n     \text2 = $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-2)[0]\n    \treturn $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-2).join(\".\")+\".unpairedUnaligned.\"+ext2\n    }\n\treturn $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")+\".unpairedUnaligned.\"+ext\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            },
                            "sbg:inheritMetadataFrom": "#reads"
                        },
                        "sbg:fileTypes": "FA, FASTA, FASTQ, FQ",
                        "label": "Unpaired unaligned reads",
                        "id": "#unpaired_unal"
                    },
                    {
                        "description": "Unpaired reads that align at least once.",
                        "type": [
                            "null",
                            "File"
                        ],
                        "outputBinding": {
                            "glob": {
                                "script": "{\n  \text = $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n    if (ext == 'gz' | ext == 'bz2'){\n     \text2 = $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-2)[0]\n    \treturn $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-2).join(\".\")+\".unpairedAligned.\"+ext2\n    }\n\treturn $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")+\".unpairedAligned.\"+ext\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            },
                            "sbg:inheritMetadataFrom": "#reads"
                        },
                        "sbg:fileTypes": "FA, FASTA, FQ, FASTQ",
                        "label": "Unpaired aligned reads",
                        "id": "#unpaired_align"
                    },
                    {
                        "outputBinding": {
                            "glob": {
                                "script": "{\n  \text = $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n    if (ext == 'gz' | ext == 'bz2'){\n     \text2 = $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-2)[0]\n    \treturn $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-2).join(\".\")+\".unalignedConcordantly_*.\"+ext2\n    }\n\treturn $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")+\".unalignedConcordantly_*.\"+ext\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            },
                            "sbg:inheritMetadataFrom": "#reads"
                        },
                        "id": "#unal_conc",
                        "type": [
                            "null",
                            {
                                "name": "unal_conc",
                                "type": "array",
                                "items": "File"
                            }
                        ]
                    },
                    {
                        "description": "Alignment SAM file.",
                        "type": [
                            "File"
                        ],
                        "outputBinding": {
                            "glob": "*aligned.sam",
                            "sbg:inheritMetadataFrom": "#reads"
                        },
                        "sbg:fileTypes": "SAM",
                        "label": "Output alignment",
                        "id": "#out_align"
                    },
                    {
                        "description": "HISAT2 reports a list of splice sites in the file : chromosome name `` genomic position of the flanking base on the left side of an intron `` genomic position of the flanking base on the right `` strand.",
                        "type": [
                            "null",
                            "File"
                        ],
                        "outputBinding": {
                            "glob": "novel_splice_sites.txt",
                            "sbg:inheritMetadataFrom": "#reads"
                        },
                        "sbg:fileTypes": "TXT",
                        "label": "Novel splice sites",
                        "id": "#novel_ss_out"
                    },
                    {
                        "description": "HISAT2 alignment metrics.",
                        "type": [
                            "null",
                            "File"
                        ],
                        "outputBinding": {
                            "glob": "metrics.txt",
                            "sbg:inheritMetadataFrom": "#reads"
                        },
                        "sbg:fileTypes": "TXT",
                        "label": "Metrics file",
                        "id": "#metrics_file"
                    },
                    {
                        "outputBinding": {
                            "glob": {
                                "script": "{\n  \text = $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n    if (ext == 'gz' | ext == 'bz2'){\n     \text2 = $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-2)[0]\n    \treturn $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-2).join(\".\")+\".alignedConcordantly_*.\"+ext2\n    }\n\treturn $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")+\".alignedConcordantly_*.\"+ext\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            },
                            "sbg:inheritMetadataFrom": "#reads"
                        },
                        "id": "#align_conc",
                        "type": [
                            "null",
                            {
                                "name": "align_conc",
                                "type": "array",
                                "items": "File"
                            }
                        ]
                    }
                ],
                "x": 510.0000218550367,
                "sbg:job": {
                    "allocatedResources": {
                        "mem": 31000,
                        "cpu": 8
                    },
                    "inputs": {
                        "omit_sec_seq": false,
                        "no_unal": false,
                        "no_contain": false,
                        "rfg": {
                            "fields": {
                                "rfg_open": null,
                                "rfg_extend": null
                            }
                        },
                        "pen_noncanintronlen": "",
                        "skip": null,
                        "raw": false,
                        "secondary": true,
                        "seed": false,
                        "max_intronlen": null,
                        "mate_orientations": "Forward-reverse",
                        "mp": {
                            "fields": {
                                "mp_max": null,
                                "mp_min": null
                            }
                        },
                        "unpaired_unaligned": true,
                        "pen_cansplice": null,
                        "met_file": false,
                        "minins": null,
                        "non_deterministic": false,
                        "no_hd": false,
                        "maxins": null,
                        "rg_id": "",
                        "pen_noncansplice": null,
                        "min_intronlen": null,
                        "unaligned_concordantly": true,
                        "upto": null,
                        "end_to_end": false,
                        "novel_ss": true,
                        "distinct_align": 10,
                        "phred64": false,
                        "qseq": false,
                        "nofw": false,
                        "no_sq": false,
                        "reorder": false,
                        "indexed_reference": {
                            "class": "File",
                            "path": "/path/to/hg38.tar",
                            "secondaryFiles": [],
                            "size": 0
                        },
                        "rna_strandness": "F",
                        "reads": [
                            {
                                "class": "File",
                                "metadata": {
                                    "paired_end": "1"
                                },
                                "path": "/path/to/reads-1.fa.gz",
                                "secondaryFiles": [],
                                "size": 0
                            },
                            {
                                "class": "File",
                                "metadata": {
                                    "paired_end": "2"
                                },
                                "path": "/path/to/reads-2.fa.gz",
                                "secondaryFiles": [],
                                "size": 0
                            }
                        ],
                        "unpaired_aligned": true,
                        "intquals": false,
                        "no_overlap": false,
                        "trim3": null,
                        "no_discordant": false,
                        "rg": null,
                        "no_mixed": false,
                        "sp": {
                            "fields": {
                                "sp_min": null,
                                "sp_max": null
                            }
                        },
                        "no_temp_splicesite": false,
                        "n_ceil": "",
                        "trim5": null,
                        "dta_cufflinks": false,
                        "transcriptome_only": false,
                        "norc": false,
                        "no_spliced_alignment": false,
                        "downstream_assembly": false,
                        "ignore_quals": false,
                        "score_min": "",
                        "aligned_concordantly": true,
                        "np": 3,
                        "dovetail": false,
                        "rdg": {
                            "fields": {
                                "rdg_extend": null,
                                "rdg_open": null
                            }
                        },
                        "qc_filter": false,
                        "pen_canintronlen": "",
                        "solexa_quals": false
                    }
                },
                "sbg:categories": [
                    "Indexing",
                    "Alignment"
                ],
                "stdout": "",
                "sbg:license": "GPLv3 license",
                "sbg:project": "jexnaex/hisat2-2-0-1-demo",
                "sbg:createdOn": 1473013887,
                "class": "CommandLineTool",
                "sbg:contributors": [
                    "jexnaex"
                ],
                "cwlVersion": "sbg:draft-2",
                "description": "__HISAT2__ is a fast and sensitive alignment program for mapping next-generation sequencing reads (whole-genome, transcriptome, and exome sequencing data) against the general human population (as well as against a single reference genome). Based on GCSA (an extension of BWT for a graph), we designed and implemented a graph FM index (GFM), an original approach and its first implementation to the best of our knowledge. In addition to using one global GFM index that represents the general population, HISAT2 uses a large set of small GFM indexes that collectively cover the whole genome (each index representing a genomic region of 56 Kbp, with 55,000 indexes needed to cover human population). These small indexes (called local indexes) combined with several alignment strategies enable effective alignment of sequencing reads. This new indexing scheme is called Hierarchical Graph FM index (HGFM). We have developed HISAT2 based on the HISAT and Bowtie2 implementations. HISAT2 outputs alignments in SAM format, enabling interoperation with a large number of other tools (e.g. SAMtools, GATK) that use SAM. If BAM output is preferred, it is suggested to use one of the SAMtools/BAMtools/Picard tools to convert SAM file to BAM. \n\n__Common issues__\n\n- Paired-end metadata fields have to be set to 1/2 for paired end alignment.\n- HISAT2 can have problems when working with large index files.",
                "sbg:latestRevision": 2,
                "sbg:image_url": null,
                "sbg:links": [
                    {
                        "label": "Homepage",
                        "id": "https://ccb.jhu.edu/software/hisat2/manual.shtml#the-hisat2-build-indexer"
                    },
                    {
                        "label": "Source code",
                        "id": "ftp://ftp.ccb.jhu.edu/pub/infphilo/hisat2/downloads/hisat2-2.0.4-source.zip"
                    },
                    {
                        "label": "Wiki",
                        "id": "https://wiki.rc.ufl.edu/doc/HISAT2"
                    },
                    {
                        "label": "Download",
                        "id": "ftp://ftp.ccb.jhu.edu/pub/infphilo/hisat2/downloads/hisat2-2.0.4-source.zip"
                    },
                    {
                        "label": "Publication",
                        "id": "http://www.nature.com/nmeth/journal/vaop/ncurrent/full/nmeth.3317.html"
                    }
                ],
                "arguments": [
                    {
                        "separate": true,
                        "prefix": "-S",
                        "valueFrom": {
                            "script": "{\n  \text = $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n    if (ext == 'gz' | ext == 'bz2'){\n    \treturn $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-2).join(\".\")+\".HISAT-2.0.1.aligned.sam\"\n    }\n\treturn $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")+\".HISAT-2.0.1.aligned.sam\"\n}",
                            "class": "Expression",
                            "engine": "#cwl-js-engine"
                        },
                        "position": 3
                    },
                    {
                        "separate": true,
                        "prefix": "",
                        "valueFrom": {
                            "script": "{\t\n  \tcmd=\"\"\n\tvar reads = [].concat($job.inputs.reads)\n    ext = reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n    if (ext == 'bz2' | ext == 'gz'){\n    \text = reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-2)[0]\n    }\n  \tif (ext == 'txt' & $job.inputs.qseq){\n  \t\tcmd = '--qseq'\n  \t}\n  \telse if (ext == 'fa' | ext == 'fasta' | ext == 'mfa'){\n  \t\tcmd = '-f'\n  \t}\n  \telse if (ext == 'txt' & $job.inputs.raw){\n  \t\tcmd = '-r'\n  \t}\t\n  \treturn cmd\n\n}",
                            "class": "Expression",
                            "engine": "#cwl-js-engine"
                        },
                        "position": 0
                    },
                    {
                        "prefix": "-p",
                        "valueFrom": {
                            "script": "{\n\treturn $job.allocatedResources.cpu\n}",
                            "class": "Expression",
                            "engine": "#cwl-js-engine"
                        },
                        "separate": true
                    }
                ],
                "sbg:validationErrors": [],
                "baseCommand": [
                    {
                        "script": "{\n\treturn \"tar -xf \" + $job.inputs.indexed_reference.path + \" && /opt/hisat2/hisat2\"\n}",
                        "class": "Expression",
                        "engine": "#cwl-js-engine"
                    }
                ],
                "hints": [
                    {
                        "class": "sbg:MemRequirement",
                        "value": 31000
                    },
                    {
                        "dockerImageId": "",
                        "class": "DockerRequirement",
                        "dockerPull": "images.sbgenomics.com/jexnaex/hisat2:2.0.1"
                    },
                    {
                        "class": "sbg:CPURequirement",
                        "value": 8
                    }
                ],
                "stdin": "",
                "temporaryFailCodes": [],
                "sbg:modifiedOn": 1475234066,
                "inputs": [
                    {
                        "sbg:altPrefix": "-u",
                        "description": "Stop after first <int> reads/pairs.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "no limit",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--upto",
                            "position": 0
                        },
                        "sbg:category": "Input options",
                        "label": "Align first <n> reads",
                        "id": "#upto"
                    },
                    {
                        "description": "Write unpaired reads that fail to align to a file. These reads correspond to the SAM records with the FLAGS `0x4` bit set and neither the `0x40` nor `0x80` bits set.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "--un",
                            "valueFrom": {
                                "script": "{\n  \text = $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n    if (ext == 'gz' | ext == 'bz2'){\n     \text2 = $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-2)[0]\n    \treturn $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-2).join(\".\")+\".unpairedUnaligned.\"+ext2\n    }\n\treturn $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")+\".unpairedUnaligned.\"+ext\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            },
                            "separate": true
                        },
                        "sbg:category": "Output options",
                        "label": "Write unpaired unaligned",
                        "id": "#unpaired_unaligned"
                    },
                    {
                        "description": "Write unpaired reads that align at least once to a file. These reads correspond to the SAM records with the FLAGS `0x4`, `0x40`, and `0x80` bits unset.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "--al",
                            "valueFrom": {
                                "script": "{\n  \text = $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n    if (ext == 'gz' | ext == 'bz2'){\n     \text2 = $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-2)[0]\n    \treturn $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-2).join(\".\")+\".unpairedAligned.\"+ext2\n    }\n\treturn $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")+\".unpairedAligned.\"+ext\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            },
                            "separate": true
                        },
                        "sbg:category": "Output options",
                        "label": "Write unpaired aligned",
                        "id": "#unpaired_aligned"
                    },
                    {
                        "description": "Write paired-end reads that fail to align concordantly to file(s). These reads correspond to the SAM records with the FLAGS `0x4` bit set and either the `0x40` or `0x80` bit set (depending on whether it's mate #1 or #2).",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "--un-conc",
                            "valueFrom": {
                                "script": "{\n  \text = $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n    if (ext == 'gz' | ext == 'bz2'){\n     \text2 = $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-2)[0]\n    \treturn $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-2).join(\".\")+\".unalignedConcordantly_%.\"+ext2\n    }\n\treturn $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")+\".unalignedConcordantly_%.\"+ext\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            },
                            "separate": true
                        },
                        "sbg:category": "Output options",
                        "label": "Write unaligned concordantly",
                        "id": "#unaligned_concordantly"
                    },
                    {
                        "sbg:altPrefix": "-5",
                        "description": "Trim <int> bases from 5'/left end of reads.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "0",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--trim5",
                            "position": 0
                        },
                        "sbg:category": "Input options",
                        "label": "Trim 5'",
                        "id": "#trim5"
                    },
                    {
                        "sbg:altPrefix": "-3",
                        "description": "Trim <int> bases from 3'/right end of reads.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "0",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--trim3",
                            "position": 0
                        },
                        "sbg:category": "Input options",
                        "label": "Trim 3'",
                        "id": "#trim3"
                    },
                    {
                        "sbg:altPrefix": "--transcriptome-mapping-only",
                        "description": "Report only those alignments within known transcripts.",
                        "id": "#transcriptome_only",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "--tmo",
                            "separate": true
                        },
                        "sbg:category": "Spliced alignment options",
                        "label": "Align only to transcriptome",
                        "sbg:stageInput": null
                    },
                    {
                        "sbg:category": "Scoring options",
                        "label": "Soft-clipping penalties",
                        "type": [
                            "null",
                            {
                                "name": "sp",
                                "type": "record",
                                "fields": [
                                    {
                                        "name": "sp_min",
                                        "type": [
                                            "null",
                                            "int"
                                        ],
                                        "sbg:toolDefaultValue": "1",
                                        "inputBinding": {
                                            "sbg:cmdInclude": "true",
                                            "prefix": "--sp",
                                            "valueFrom": {
                                                "script": "{\n\treturn $job.inputs.sp.sp_max + \",\" + $job.inputs.sp.sp_min\n}",
                                                "class": "Expression",
                                                "engine": "#cwl-js-engine"
                                            },
                                            "separate": true
                                        },
                                        "label": "MIN",
                                        "sbg:stageInput": null
                                    },
                                    {
                                        "label": "MAX",
                                        "sbg:stageInput": null,
                                        "type": [
                                            "null",
                                            "int"
                                        ],
                                        "sbg:toolDefaultValue": "2",
                                        "name": "sp_max"
                                    }
                                ]
                            }
                        ],
                        "id": "#sp",
                        "description": "Sets the maximum (`MX`) and minimum (`MN`) penalties for soft-clipping per base, both integers. A number less than or equal to `MX` and greater than or equal to `MN` is subtracted from the alignment score for each position. The number subtracted is `MN + floor( (MX-MN)(MIN(Q, 40.0)/40.0) )` where Q is the Phred quality value. Default: `MX` = 2, `MN` = 1."
                    },
                    {
                        "description": "Convert input qualities from [Solexa][Phred quality] (which can be negative) to [Phred][Phred quality] (which can't). This scheme was used in older Illumina GA Pipeline versions (prior to 1.3).",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "position": 0,
                            "separate": true
                        },
                        "sbg:category": "Input options",
                        "label": "Solexa quals",
                        "id": "#solexa_quals"
                    },
                    {
                        "description": "Skip the first <int> reads/pairs in the input.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "0",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--skip",
                            "position": 0
                        },
                        "sbg:category": "Input options",
                        "label": "Skip first <n> reads",
                        "id": "#skip"
                    },
                    {
                        "description": "Use `` as the seed for pseudo-random number generator.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "0",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--seed",
                            "position": 0
                        },
                        "sbg:category": "Other options",
                        "label": "Seed",
                        "id": "#seed"
                    },
                    {
                        "description": "Report secondary alignments.",
                        "id": "#secondary",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "--secondary",
                            "separate": true
                        },
                        "sbg:category": "Reporting options",
                        "label": "Report secondary",
                        "sbg:stageInput": null
                    },
                    {
                        "description": "Sets a function governing the minimum alignment score needed for an alignment to be considered \"valid\" (i.e. good enough to report). This is a function of read length. For instance, specifying `L,0,-0.6` sets the minimum-score function `f` to `f(x) = 0 + -0.6 * x`, where `x` is the read length. See also: [setting function options].",
                        "type": [
                            "null",
                            "string"
                        ],
                        "sbg:toolDefaultValue": "L,0,-0.2",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--score-min",
                            "position": 0
                        },
                        "sbg:category": "Scoring options",
                        "label": "Minimum alignment score",
                        "id": "#score_min"
                    },
                    {
                        "description": "Specify strand-specific information: the default is unstranded. For single-end reads, use F or R. 'F' means a read corresponds to a transcript. 'R' means a read corresponds to the reverse complemented counterpart of a transcript. For paired-end reads, use either FR or RF. With this option being used, every read alignment will have an XS attribute tag: '+' means a read belongs to a transcript on '+' strand of genome. '-' means a read belongs to a transcript on '-' strand of genome. (TopHat has a similar option, --library-type option, where fr-firststrand corresponds to R and RF; fr-secondstrand corresponds to F and FR).",
                        "type": [
                            "null",
                            {
                                "symbols": [
                                    "F",
                                    "R",
                                    "FR",
                                    "RF"
                                ],
                                "name": "rna_strandness",
                                "type": "enum"
                            }
                        ],
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--rna-strandness",
                            "position": 0
                        },
                        "sbg:category": "Spliced alignment options",
                        "label": "RNA strandedness",
                        "id": "#rna_strandness"
                    },
                    {
                        "description": "Set the read group ID to ``. This causes the SAM `@RG` header line to be printed, with `` as the value associated with the `ID:` tag. It also causes the `RG:Z:` extra field to be attached to each SAM output record, with value set to ``.",
                        "type": [
                            "null",
                            "string"
                        ],
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--rg-id",
                            "position": 0
                        },
                        "sbg:category": "SAM options",
                        "label": "Read group ID",
                        "id": "#rg_id"
                    },
                    {
                        "description": "Add `` (usually of the form `TAG:VAL`, e.g. `SM:Pool1`) as a field on the `@RG` header line. Note: in order for the `@RG` line to appear, [`--rg-id`] must also be specified. This is because the `ID` tag is required by the SAM specification. Specify this multiple times to set multiple fields. See the SAM file specification for details about what fields are legal.",
                        "type": [
                            "null",
                            {
                                "name": "rg",
                                "type": "array",
                                "items": "string"
                            }
                        ],
                        "inputBinding": {
                            "itemSeparator": null,
                            "separate": true,
                            "prefix": "--rg",
                            "sbg:cmdInclude": true,
                            "position": 0
                        },
                        "sbg:category": "SAM options",
                        "label": "Read group",
                        "id": "#rg"
                    },
                    {
                        "description": "Sets the reference gap open (``) and extend (``) penalties. A reference gap of length N gets a penalty of `` + N * ``.",
                        "type": [
                            "null",
                            {
                                "name": "rfg",
                                "type": "record",
                                "fields": [
                                    {
                                        "name": "rfg_open",
                                        "type": [
                                            "null",
                                            "int"
                                        ],
                                        "sbg:toolDefaultValue": "5",
                                        "inputBinding": {
                                            "sbg:cmdInclude": "true",
                                            "prefix": "--rfg",
                                            "valueFrom": {
                                                "script": "{\n  return $job.inputs.rfg.rfg_open + \",\" + $job.inputs.rfg.rfg_extend\n}",
                                                "class": "Expression",
                                                "engine": "#cwl-js-engine"
                                            },
                                            "separate": true
                                        },
                                        "label": "Open penalty",
                                        "sbg:stageInput": null
                                    },
                                    {
                                        "label": "Extend penalty",
                                        "sbg:stageInput": null,
                                        "type": [
                                            "null",
                                            "int"
                                        ],
                                        "sbg:toolDefaultValue": "3",
                                        "name": "rfg_extend"
                                    }
                                ]
                            }
                        ],
                        "sbg:toolDefaultValue": "5,3",
                        "sbg:category": "Scoring options",
                        "label": "Reference gap penalties",
                        "id": "#rfg"
                    },
                    {
                        "description": "Guarantees that output SAM records are printed in an order corresponding to the order of the reads in the original input file. Causes HISAT2 to run somewhat slower and use somewhat more memory.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--reorder",
                            "position": 0
                        },
                        "sbg:category": "Performance options",
                        "label": "Reorder reads",
                        "id": "#reorder"
                    },
                    {
                        "description": "Paired or unpaired reads, __for paired reads paired_end metadata field has to be set for 1/2. Paired only or unpaired only reads can be set in one run. If reads are paired corresponding mate1s and mate2s have to be completely matched__.",
                        "sbg:fileTypes": "BZ2, GZ, FQ, FASTQ, FASTA, FA, MFA",
                        "type": [
                            {
                                "name": "reads",
                                "type": "array",
                                "items": "File"
                            }
                        ],
                        "inputBinding": {
                            "itemSeparator": " ",
                            "sbg:cmdInclude": true,
                            "position": 2,
                            "valueFrom": {
                                "script": "{\n  cmd = \"\"\n  reads = [].concat($job.inputs.reads)\n  reads1 = [];\n  reads2 = [];\n  u_reads = [];\n  for (var i = 0; i < reads.length; i++){\n      if (reads[i].metadata.paired_end == 1){\n        reads1.push(reads[i].path);\n      }\n      else if (reads[i].metadata.paired_end == 2){\n        reads2.push(reads[i].path);\n      }\n    else {\n      u_reads.push(reads[i].path);\n     }\n    }\n  if (reads1.length > 0 & reads1.length == reads2.length){\n      cmd = \"-1 \" + reads1.join(\",\") + \" -2 \" + reads2.join(\",\");\n  }\n  if (u_reads.length > 0){\n      cmd = \" -U \" + u_reads.join(\",\");\n  }\n  return cmd\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            },
                            "separate": false
                        },
                        "sbg:category": "Input files",
                        "label": "Reads",
                        "id": "#reads",
                        "required": true
                    },
                    {
                        "description": "Sets the read gap open (``) and extend (``) penalties. A read gap of length N gets a penalty of `` + N * ``.",
                        "id": "#rdg",
                        "type": [
                            "null",
                            {
                                "name": "rdg",
                                "type": "record",
                                "fields": [
                                    {
                                        "name": "rdg_open",
                                        "type": [
                                            "null",
                                            "int"
                                        ],
                                        "sbg:toolDefaultValue": "5",
                                        "inputBinding": {
                                            "sbg:cmdInclude": "true",
                                            "prefix": "--rdg",
                                            "valueFrom": {
                                                "script": "{\n\treturn $job.inputs.rdg.rdg_open + \",\" + $job.inputs.rdg.rdg_extend\n}",
                                                "class": "Expression",
                                                "engine": "#cwl-js-engine"
                                            },
                                            "separate": true
                                        },
                                        "label": "Gap open penalty",
                                        "sbg:stageInput": null
                                    },
                                    {
                                        "label": "Gap extend penalty",
                                        "sbg:stageInput": null,
                                        "type": [
                                            "null",
                                            "int"
                                        ],
                                        "sbg:toolDefaultValue": "3",
                                        "name": "rdg_extend"
                                    }
                                ]
                            }
                        ],
                        "sbg:category": "Scoring options",
                        "label": "Gap penalty",
                        "sbg:stageInput": null
                    },
                    {
                        "description": "Query input files are raw one-sequence-per-line.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "sbg:category": "Input options",
                        "label": "Raw sequences",
                        "id": "#raw"
                    },
                    {
                        "description": "Query input files are in Illumina's qseq format.",
                        "id": "#qseq",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "sbg:category": "Input options",
                        "label": "Qseq reads",
                        "sbg:stageInput": null
                    },
                    {
                        "description": "Filter out reads for which the QSEQ filter field is non-zero.  Only has an effect when read format is `--qseq`.  Default: off.",
                        "id": "#qc_filter",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "--qc-filter",
                            "separate": true
                        },
                        "sbg:category": "Other options",
                        "label": "QC filter",
                        "sbg:stageInput": null
                    },
                    {
                        "description": "Qualities are Phred+64.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "position": 0,
                            "valueFrom": {
                                "script": "{\n\tcmd=\"\"\n    reads = [].concat($job.inputs.reads)\n    if ($job.inputs.phred64 | reads[0].metadata.quality_scale == 'illumina13'){\n    \tcmd=\"--phred64\"\n    }\n  \tif ($job.inputs.intquals){\n  \t\tcmd =\"--int-quals\"\n  \t}\n\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            },
                            "separate": false
                        },
                        "sbg:category": "Input options",
                        "label": "Phred 64 quality scale",
                        "id": "#phred64"
                    },
                    {
                        "description": "Sets the penalty for each pair of non-canonical splice sites (e.g. non-GT/AG).",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "12",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--pen-noncansplice",
                            "position": 0
                        },
                        "sbg:category": "Spliced alignment options",
                        "label": "Non canonical splice site penalty",
                        "id": "#pen_noncansplice"
                    },
                    {
                        "description": "Sets the penalty for long introns with noncanonical splice sites so that alignments with shorter introns are preferred to those with longer ones.",
                        "type": [
                            "null",
                            "string"
                        ],
                        "sbg:toolDefaultValue": "G,-8,1",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--pen-noncanintronlen",
                            "position": 0
                        },
                        "sbg:category": "Spliced alignment options",
                        "label": "Long introns w/ noncanonical splice sites penalty",
                        "id": "#pen_noncanintronlen"
                    },
                    {
                        "description": "Sets the penalty for each pair of canonical splice sites (e.g. GT/AG).",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "0",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--pen-cansplice",
                            "position": 0
                        },
                        "sbg:category": "Spliced alignment options",
                        "label": "Canonical splice site penalty",
                        "id": "#pen_cansplice"
                    },
                    {
                        "description": "Sets the penalty for long introns with canonical splice sites so that alignments with shorter introns are preferred to those with longer ones.",
                        "type": [
                            "null",
                            "string"
                        ],
                        "sbg:toolDefaultValue": "G,-8,1",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--pen-canintronlen",
                            "position": 0
                        },
                        "sbg:category": "Spliced alignment options",
                        "label": "Long introns w/ canonical splice site penalty",
                        "id": "#pen_canintronlen"
                    },
                    {
                        "description": "When printing secondary alignments, HISAT2 by default will write out the `SEQ` and `QUAL` strings. Specifying this option causes HISAT2 to print an asterix in those fields instead.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--omit-sec-seq",
                            "position": 0
                        },
                        "sbg:category": "SAM options",
                        "label": "Omit secondary sequence",
                        "id": "#omit_sec_seq"
                    },
                    {
                        "description": "Sets penalty for positions where the read, reference, or both, contain an ambiguous character such as `N`. Default: 1.",
                        "id": "#np",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "1",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "--np",
                            "separate": true
                        },
                        "sbg:category": "Scoring options",
                        "label": "'N' penalty",
                        "sbg:stageInput": null
                    },
                    {
                        "description": "With this mode, you can provide a list of novel splice sites that were generated from the option \"--novel-splicesite-outfile\".",
                        "sbg:fileTypes": "TXT",
                        "type": [
                            "null",
                            "File"
                        ],
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "--novel-splicesite-infile",
                            "separate": true
                        },
                        "sbg:category": "Spliced alignment options",
                        "label": "Novel splice sites",
                        "id": "#novel_ss_in",
                        "required": false
                    },
                    {
                        "description": "In this mode, HISAT2 reports a list of splice sites in the file : chromosome name `` genomic position of the flanking base on the left side of an intron `` genomic position of the flanking base on the right `` strand.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "--novel-splicesite-outfile",
                            "valueFrom": {
                                "script": "{\n\treturn \"novel_splice_sites.txt\"\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            },
                            "separate": true
                        },
                        "sbg:category": "Spliced alignment options",
                        "label": "Novel splice sites out",
                        "id": "#novel_ss"
                    },
                    {
                        "description": "If `--norc` is specified, `hisat2` will not attempt to align unpaired reads against the reverse-complement (Crick) reference strand. In paired-end mode, `--norc` pertain to the fragments.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "--norc",
                            "separate": true
                        },
                        "sbg:category": "Alignment options",
                        "label": "No reverse complement",
                        "id": "#norc"
                    },
                    {
                        "description": "Normally, HISAT2 re-initializes its pseudo-random generator for each read. It seeds the generator with a number derived from (a) the read name, (b) the nucleotide sequence, (c) the quality sequence, (d) the value of the [`--seed`] option. This means that if two reads are identical (same name, same nucleotides, same qualities) HISAT2 will find and report the same alignment(s) for both, even if there was ambiguity. When `--non-deterministic` is specified, HISAT2 re-initializes its pseudo-random generator for each read using the current time. This means that HISAT2 will not necessarily report the same alignment for two identical reads. This is counter-intuitive for some users, but might be more appropriate in situations where the input consists of many identical reads.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--non-deterministic",
                            "position": 0
                        },
                        "sbg:category": "Other options",
                        "label": "Non deterministic",
                        "id": "#non_deterministic"
                    },
                    {
                        "description": "If `--nofw` is specified, `hisat2` will not attempt to align unpaired reads to the forward (Watson) reference strand.",
                        "id": "#nofw",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "--nofw",
                            "separate": true
                        },
                        "sbg:category": "Alignment options",
                        "label": "No forward",
                        "sbg:stageInput": null
                    },
                    {
                        "description": "Suppress SAM records for reads that failed to align.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--no-unal",
                            "position": 0
                        },
                        "sbg:category": "SAM options",
                        "label": "Dismiss unaligned reads",
                        "id": "#no_unal"
                    },
                    {
                        "description": "HISAT2, by default, makes use of splice sites found by earlier reads to align later reads in the same run, in particular, reads with small anchors (<= 15 bp). The option disables this default alignment strategy.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--no-temp-splicesite",
                            "position": 0
                        },
                        "sbg:category": "Spliced alignment options",
                        "label": "No temp splice sites",
                        "id": "#no_temp_splicesite"
                    },
                    {
                        "description": "Suppress `@SQ` SAM header lines.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--no-sq",
                            "position": 0
                        },
                        "sbg:category": "SAM options",
                        "label": "No @SQ lines",
                        "id": "#no_sq"
                    },
                    {
                        "description": "Disable spliced alignment.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--no-spliced-alignment",
                            "position": 0
                        },
                        "sbg:category": "Spliced alignment options",
                        "label": "No spliced alignment",
                        "id": "#no_spliced_alignment"
                    },
                    {
                        "description": "If one mate alignment overlaps the other at all, consider that to be non-concordant.  See also: [Mates can overlap, contain or dovetail each other].  Default: mates can overlap in a concordant alignment.",
                        "id": "#no_overlap",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "--no-overlap",
                            "separate": true
                        },
                        "sbg:category": "Paired-end options",
                        "label": "No overlap",
                        "sbg:stageInput": null
                    },
                    {
                        "description": "By default, when `hisat2` cannot find a concordant or discordant alignment for a pair, it then tries to find alignments for the individual mates. This option disables that behavior.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--no-mixed",
                            "position": 0
                        },
                        "sbg:category": "Paired-end options",
                        "label": "No individual alignment",
                        "id": "#no_mixed"
                    },
                    {
                        "description": "Suppress SAM header lines (starting with `@`).",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--no-hd",
                            "position": 0
                        },
                        "sbg:category": "SAM options",
                        "label": "No header",
                        "id": "#no_hd"
                    },
                    {
                        "description": "By default, `hisat2` looks for discordant alignments if it cannot find any concordant alignments. A discordant alignment is an alignment where both mates align uniquely, but that does not satisfy the paired-end constraints ([`--fr`/`--rf`/`--ff`], [`-I`], [`-X`]). This option disables that behavior.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--no-discordant",
                            "position": 0
                        },
                        "sbg:category": "Paired-end options",
                        "label": "Disable dicordant alinments",
                        "id": "#no_discordant"
                    },
                    {
                        "description": "If one mate alignment contains the other, consider that to be non-concordant. See also: [Mates can overlap, contain or dovetail each other].  Default: a mate can contain the other in a concordant alignment.",
                        "id": "#no_contain",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "--no-contain",
                            "separate": true
                        },
                        "sbg:category": "Paired-end options",
                        "label": "No contain",
                        "sbg:stageInput": null
                    },
                    {
                        "description": "Sets a function governing the maximum number of ambiguous characters (usually `N`s and/or `.`s) allowed in a read as a function of read length. For instance, specifying `-L,0,0.15` sets the N-ceiling function `f` to `f(x) = 0 + 0.15 * x`, where x is the read length. See also: [setting function options]. Reads exceeding this ceiling are [filtered out].",
                        "type": [
                            "null",
                            "string"
                        ],
                        "sbg:toolDefaultValue": "L,0,0.15",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--n-ceil",
                            "position": 0
                        },
                        "sbg:category": "Alignment options",
                        "label": "N ceil",
                        "id": "#n_ceil"
                    },
                    {
                        "sbg:category": "Scoring options",
                        "label": "Missmatch penalties",
                        "type": [
                            "null",
                            {
                                "name": "mp",
                                "type": "record",
                                "fields": [
                                    {
                                        "label": "MIN",
                                        "name": "mp_min",
                                        "type": [
                                            "null",
                                            "int"
                                        ],
                                        "sbg:toolDefaultValue": "2",
                                        "inputBinding": {
                                            "sbg:cmdInclude": "true",
                                            "prefix": "--mp",
                                            "valueFrom": {
                                                "script": "{\n\treturn $job.inputs.mp.mp_max + \",\" + $job.inputs.mp.mp_min\n}",
                                                "class": "Expression",
                                                "engine": "#cwl-js-engine"
                                            },
                                            "separate": true
                                        }
                                    },
                                    {
                                        "label": "MAX",
                                        "type": [
                                            "null",
                                            "int"
                                        ],
                                        "sbg:toolDefaultValue": "6",
                                        "name": "mp_max"
                                    }
                                ]
                            }
                        ],
                        "id": "#mp",
                        "description": "Sets the maximum (`MX`) and minimum (`MN`) mismatch penalties, both integers. A number less than or equal to `MX` and greater than or equal to `MN` is subtracted from the alignment score for each position where a read character aligns to a reference character, the characters do not match, and neither is an `N`. If [`--ignore-quals`] is specified, the number subtracted quals `MX`. Otherwise, the number subtracted is `MN + floor( (MX-MN)(MIN(Q, 40.0)/40.0) )` where Q is the Phred quality value. Default: `MX` = 6, `MN` = 2."
                    },
                    {
                        "sbg:altPrefix": "-I",
                        "description": "The minimum fragment length for valid paired-end alignments. E.g. if `-I 60` is specified and a paired-end alignment consists of two 20-bp alignments in the appropriate orientation with a 20-bp gap between them, that alignment is considered valid (as long as [`-X`] is also satisfied). A 19-bp gap would not be valid in that case. If trimming options [`-3`] or [`-5`] are also used, the [`-I`] constraint is applied with respect to the untrimmed mates. The larger the difference between [`-I`] and [`-X`], the slower HISAT2 will run. This is because larger differences bewteen [`-I`] and [`-X`] require that HISAT2 scan a larger window to determine if a concordant alignment exists. For typical fragment length ranges (200 to 400 nucleotides), HISAT2 is very efficient. Default: 0 (essentially imposing no minimum).",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "0",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--minins",
                            "position": 0
                        },
                        "sbg:category": "Paired-end options",
                        "label": "Min fragment length",
                        "id": "#minins"
                    },
                    {
                        "description": "Sets minimum intron length.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "20",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--min-intronlen",
                            "position": 0
                        },
                        "sbg:category": "Spliced alignment options",
                        "label": "Minimum intron length",
                        "id": "#min_intronlen"
                    },
                    {
                        "description": "Write `hisat2` metrics to file ``. Having alignment metric can be useful for debugging certain problems, especially performance issues.",
                        "id": "#met_file",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "--met-file",
                            "valueFrom": {
                                "script": "{\n\treturn \"metrics.txt\"\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            },
                            "separate": true
                        },
                        "sbg:category": "Output options",
                        "label": "Output metrics file",
                        "sbg:stageInput": null
                    },
                    {
                        "sbg:altPrefix": "-X",
                        "description": "The maximum fragment length for valid paired-end alignments. E.g. if `-X 100` is specified and a paired-end alignment consists of two 20-bp alignments in the proper orientation with a 60-bp gap between them, that alignment is considered valid (as long as [`-I`] is also satisfied). A 61-bp gap would not be valid in that case. If trimming options [`-3`] or [`-5`] are also used, the `-X` constraint is applied with respect to the untrimmed mates, not the trimmed mates. The larger the difference between [`-I`] and [`-X`], the slower HISAT2 will run. This is because larger differences bewteen [`-I`] and [`-X`] require that HISAT2 scan a larger window to determine if a concordant alignment exists. For typical fragment length ranges (200 to 400 nucleotides), HISAT2 is very efficient. Default: 500.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "500",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--maxins",
                            "position": 0
                        },
                        "sbg:category": "Paired-end options",
                        "label": "Maximum fragment length",
                        "id": "#maxins"
                    },
                    {
                        "description": "Sets maximum intron length.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "500000",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--max-intronlen",
                            "position": 0
                        },
                        "sbg:category": "Spliced alignment options",
                        "label": "Maximum intron length",
                        "id": "#max_intronlen"
                    },
                    {
                        "description": "The upstream/downstream mate orientations for a valid paired-end alignment against the forward reference strand. E.g., if `--fr` is specified and there is a candidate paired-end alignment where mate 1 appears upstream of the reverse complement of mate 2 and the fragment length constraints ([`-I`] and [`-X`]) are met, that alignment is valid. Also, if mate 2 appears upstream of the reverse complement of mate 1 and all other constraints are met, that too is valid. `--rf` likewise requires that an upstream mate1 be reverse-complemented and a downstream mate2 be forward-oriented. ` --ff` requires both an upstream mate 1 and a downstream mate 2 to be forward-oriented. Default: `--fr` (appropriate for Illumina's Paired-end Sequencing Assay).",
                        "type": [
                            "null",
                            {
                                "symbols": [
                                    "Forward-reverse",
                                    "Reverse-forward",
                                    "Forward-forward"
                                ],
                                "name": "mate_orientations",
                                "type": "enum"
                            }
                        ],
                        "sbg:toolDefaultValue": "Forward-reverse",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "valueFrom": {
                                "script": "{\n\tcmd=\"\"\n    if ($job.inputs.mate_orientations == 'Forward-reverse'){\n    \tcmd=\"--fr\"\n    }\n  \telse if ($job.inputs.mate_orientations == 'Forward-forward'){\n  \t\tcmd=\"--ff\"\n  \t}\n  \telse if ($job.inputs.mate_orientations == 'Refeverse-forward'){\n  \t\tcmd=\"--rf\"\n  \t}\n\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            }
                        },
                        "sbg:category": "Paired-end options",
                        "label": "Mate orientations",
                        "id": "#mate_orientations"
                    },
                    {
                        "description": "With this mode, you can provide a list of known splice sites, which HISAT2 makes use of to align reads with small anchors. You can create such a list using `HISAT2 Extract Splice Sites genes.gtf > splicesites.txt`, where  `genes.gtf` is a gene annotation file, and `splicesites.txt` is a list of splice sites with which you provide HISAT2 in this mode. Note that it is better to use indexes built using annotated transcripts (such asgenome_tran or genome_snp_tran), which works better than using this option. It has no effect to provide splice sites that are already included in the indexes.",
                        "sbg:fileTypes": "TXT",
                        "type": [
                            "null",
                            "File"
                        ],
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "--known-splicesite-infile",
                            "separate": true
                        },
                        "sbg:category": "Spliced alignment options",
                        "label": "Know splice sites",
                        "id": "#known_ss",
                        "required": false
                    },
                    {
                        "description": "Qualities encoded as space-delimited integers.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "sbg:category": "Input options",
                        "label": "Ingteger qualities",
                        "id": "#intquals"
                    },
                    {
                        "description": "TAR containing index files as providid by HISAT2 Build 2.0.4.",
                        "sbg:fileTypes": "TAR",
                        "type": [
                            "File"
                        ],
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "-x",
                            "valueFrom": {
                                "script": "{\n    var a = '22_20-21M_snp144Common_HISAT2-2.0.1.tar'\n    \n    var ref = $job.inputs.indexed_reference.path.split(\"/\").slice(-1)[0].split(\"_\")\n    if (ref[0] == \"\"){\n      ref = ref.slice(2,ref.length).join(\".\").split(\".\").slice(0,-1).join(\".\")\n    \t\n    }\n  \telse {\n      ref = ref.join(\"_\").split(\".\").slice(0,-1).join(\".\")\t\n    }\n\treturn \"index/\" + ref\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            },
                            "position": 1
                        },
                        "sbg:category": "Input files",
                        "label": "Indexed reference",
                        "id": "#indexed_reference",
                        "required": true
                    },
                    {
                        "description": "When calculating a mismatch penalty, always consider the quality value at the mismatched position to be the highest possible, regardless of the actual value. I.e. input is treated as though all quality values are high. This is also the default behavior when the input doesn't specify quality values.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--ignore-quals",
                            "position": 0
                        },
                        "sbg:category": "Alignment options",
                        "label": "Ignore qualities",
                        "id": "#ignore_quals"
                    },
                    {
                        "description": "In this mode, HISAT2 requires that the entire read align from one end to the other, without any trimming (or \"soft clipping\") of characters from either end. The match bonus `--ma` always equals 0 in this mode, so all alignment scores are less than or equal to 0, and the greatest possible alignment score is 0. This is mutually exclusive with `--local`.  `end_to_end` is the default mode.",
                        "id": "#end_to_end",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "--end-to-end",
                            "separate": true
                        },
                        "sbg:category": "Alignment options",
                        "label": "End-to-end",
                        "sbg:stageInput": null
                    },
                    {
                        "description": "Report alignments tailored specifically for Cufflinks. In addition to what HISAT2 does with the above option (--dta), With this option, HISAT2 looks for novel splice sites with three signals (GT/AG, GC/AG, AT/AC), but all user-provided splice sites are used irrespective of their signals. HISAT2 produces an optional field, XS:A:[+-], for every spliced alignment.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--dta-cufflinks",
                            "position": 0
                        },
                        "sbg:category": "Spliced alignment options",
                        "label": "Alignment tailored for cufflinks",
                        "id": "#dta_cufflinks"
                    },
                    {
                        "sbg:altPrefix": "--downstream-transcriptome-assembly",
                        "description": "Report alignments tailored for transcript assemblers including StringTie. With this option, HISAT2 requires longer anchor lengths for de novo discovery of splice sites. This leads to fewer alignments with short-anchors, which helps transcript assemblers improve significantly in computationa and memory usage.",
                        "id": "#downstream_assembly",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "--dta",
                            "separate": true
                        },
                        "sbg:category": "Spliced alignment options",
                        "label": "Alignments for transcriptome assembly",
                        "sbg:stageInput": null
                    },
                    {
                        "description": "If the mates \"dovetail\", that is if one mate alignment extends past the beginning of the other such that the wrong mate begins upstream, consider that to be concordant.  See also: [Mates can overlap, contain or dovetail each other].  Default: mates cannot dovetail in a concordant alignment.",
                        "id": "#dovetail",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": true,
                            "prefix": "--dovetail",
                            "position": 0
                        },
                        "sbg:category": "Paired-end options",
                        "label": "Dovetail",
                        "sbg:stageInput": null
                    },
                    {
                        "description": "It searches for at most `` distinct, primary alignments for each read. Primary alignments mean alignments whose alignment score is equal or higher than any other alignments. The search terminates when it can't find more distinct valid alignments, or when it finds ``, whichever happens first. The alignment score for a paired-end alignment equals the sum of the alignment scores of the individual mates. Each reported read or pair alignment beyond the first has the SAM 'secondary' bit (which equals 256) set in its FLAGS field. For reads that have more than `` distinct, valid alignments, `hisat2` does not gaurantee that the `` alignments reported are the best possible in terms of alignment score. Default: 5 (HFM) or 10 (HGFM) Note: HISAT2 is not designed with large values for `-k` in mind, and when aligning reads to long, repetitive genomes large `-k` can be very, very slow.",
                        "id": "#distinct_align",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "5(HFM)/10(HGFM)",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "-k",
                            "separate": true
                        },
                        "sbg:category": "Spliced alignment options",
                        "label": "Max distinct alignments",
                        "sbg:stageInput": null
                    },
                    {
                        "description": "Write paired-end reads that align concordantly at least once to file(s). These reads correspond to the SAM records with the FLAGS `0x4` bit unset and either the `0x40` or `0x80` bit set (depending on whether it's mate #1 or #2).",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "--al-conc",
                            "valueFrom": {
                                "script": "{\n  \text = $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n    if (ext == 'gz' | ext == 'bz2'){\n     \text2 = $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-2)[0]\n    \treturn $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-2).join(\".\")+\".alignedConcordantly_%.\"+ext2\n    }\n\treturn $job.inputs.reads[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")+\".alignedConcordantly_%.\"+ext\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            },
                            "separate": true
                        },
                        "sbg:category": "Output options",
                        "label": "Write concordantly aligned",
                        "id": "#aligned_concordantly"
                    }
                ],
                "id": "jexnaex/hisat2-2-0-1-demo/hisat2-2-0-1/2",
                "sbg:cmdPreview": "tar -xf /path/to/hg38.tar && /opt/hisat2/hisat2  -f -p 8 -x index/hg38 -1 /path/to/reads-1.fa.gz -2 /path/to/reads-2.fa.gz -S reads-1.HISAT-2.0.1.aligned.sam"
            },
            "sbg:y": 178.77892093309748,
            "inputs": [
                {
                    "id": "#HISAT2.upto"
                },
                {
                    "id": "#HISAT2.unpaired_unaligned"
                },
                {
                    "id": "#HISAT2.unpaired_aligned"
                },
                {
                    "id": "#HISAT2.unaligned_concordantly"
                },
                {
                    "id": "#HISAT2.trim5"
                },
                {
                    "id": "#HISAT2.trim3"
                },
                {
                    "id": "#HISAT2.transcriptome_only"
                },
                {
                    "id": "#HISAT2.sp"
                },
                {
                    "id": "#HISAT2.solexa_quals"
                },
                {
                    "id": "#HISAT2.skip"
                },
                {
                    "id": "#HISAT2.seed"
                },
                {
                    "id": "#HISAT2.secondary"
                },
                {
                    "id": "#HISAT2.score_min"
                },
                {
                    "id": "#HISAT2.rna_strandness"
                },
                {
                    "id": "#HISAT2.rg_id"
                },
                {
                    "id": "#HISAT2.rg"
                },
                {
                    "id": "#HISAT2.rfg"
                },
                {
                    "id": "#HISAT2.reorder"
                },
                {
                    "id": "#HISAT2.reads",
                    "source": [
                        "#SBG_FASTQ_Quality_Detector.result"
                    ]
                },
                {
                    "id": "#HISAT2.rdg"
                },
                {
                    "id": "#HISAT2.raw"
                },
                {
                    "id": "#HISAT2.qseq"
                },
                {
                    "id": "#HISAT2.qc_filter"
                },
                {
                    "id": "#HISAT2.phred64"
                },
                {
                    "id": "#HISAT2.pen_noncansplice"
                },
                {
                    "id": "#HISAT2.pen_noncanintronlen"
                },
                {
                    "id": "#HISAT2.pen_cansplice"
                },
                {
                    "id": "#HISAT2.pen_canintronlen"
                },
                {
                    "id": "#HISAT2.omit_sec_seq"
                },
                {
                    "id": "#HISAT2.np"
                },
                {
                    "id": "#HISAT2.novel_ss_in"
                },
                {
                    "id": "#HISAT2.novel_ss"
                },
                {
                    "id": "#HISAT2.norc"
                },
                {
                    "id": "#HISAT2.non_deterministic"
                },
                {
                    "id": "#HISAT2.nofw"
                },
                {
                    "id": "#HISAT2.no_unal"
                },
                {
                    "id": "#HISAT2.no_temp_splicesite"
                },
                {
                    "id": "#HISAT2.no_sq"
                },
                {
                    "id": "#HISAT2.no_spliced_alignment"
                },
                {
                    "id": "#HISAT2.no_overlap"
                },
                {
                    "id": "#HISAT2.no_mixed"
                },
                {
                    "id": "#HISAT2.no_hd"
                },
                {
                    "id": "#HISAT2.no_discordant"
                },
                {
                    "id": "#HISAT2.no_contain"
                },
                {
                    "id": "#HISAT2.n_ceil"
                },
                {
                    "id": "#HISAT2.mp"
                },
                {
                    "id": "#HISAT2.minins"
                },
                {
                    "id": "#HISAT2.min_intronlen"
                },
                {
                    "id": "#HISAT2.met_file"
                },
                {
                    "id": "#HISAT2.maxins"
                },
                {
                    "id": "#HISAT2.max_intronlen"
                },
                {
                    "id": "#HISAT2.mate_orientations"
                },
                {
                    "id": "#HISAT2.known_ss"
                },
                {
                    "id": "#HISAT2.intquals"
                },
                {
                    "id": "#HISAT2.indexed_reference",
                    "source": [
                        "#HISAT2_Build.tar_out"
                    ]
                },
                {
                    "id": "#HISAT2.ignore_quals"
                },
                {
                    "id": "#HISAT2.end_to_end"
                },
                {
                    "id": "#HISAT2.dta_cufflinks"
                },
                {
                    "id": "#HISAT2.downstream_assembly"
                },
                {
                    "id": "#HISAT2.dovetail"
                },
                {
                    "id": "#HISAT2.distinct_align"
                },
                {
                    "id": "#HISAT2.aligned_concordantly"
                }
            ],
            "id": "#HISAT2",
            "outputs": [
                {
                    "id": "#HISAT2.unpaired_unal"
                },
                {
                    "id": "#HISAT2.unpaired_align"
                },
                {
                    "id": "#HISAT2.unal_conc"
                },
                {
                    "id": "#HISAT2.out_align"
                },
                {
                    "id": "#HISAT2.novel_ss_out"
                },
                {
                    "id": "#HISAT2.metrics_file"
                },
                {
                    "id": "#HISAT2.align_conc"
                }
            ]
        },
        {
            "sbg:x": 218.33333333333346,
            "run": {
                "y": 345.4455820719403,
                "sbg:revisionsInfo": [
                    {
                        "sbg:modifiedOn": 1473014334,
                        "sbg:revision": 0,
                        "sbg:revisionNotes": null,
                        "sbg:modifiedBy": "jexnaex"
                    },
                    {
                        "sbg:modifiedOn": 1473014358,
                        "sbg:revision": 1,
                        "sbg:revisionNotes": null,
                        "sbg:modifiedBy": "jexnaex"
                    },
                    {
                        "sbg:modifiedOn": 1475241933,
                        "sbg:revision": 2,
                        "sbg:revisionNotes": null,
                        "sbg:modifiedBy": "jexnaex"
                    },
                    {
                        "sbg:modifiedOn": 1475502253,
                        "sbg:revision": 3,
                        "sbg:revisionNotes": null,
                        "sbg:modifiedBy": "jexnaex"
                    }
                ],
                "sbg:createdBy": "jexnaex",
                "label": "HISAT2 Build",
                "appUrl": "/u/jexnaex/hisat2-2-0-1-demo/apps/#jexnaex/hisat2-2-0-1-demo/hisat2-build-2-0-1/3",
                "sbg:modifiedBy": "jexnaex",
                "sbg:id": "admin/sbg-public-data/hisat2-build-2-0-1/3",
                "successCodes": [],
                "requirements": [
                    {
                        "id": "#cwl-js-engine",
                        "class": "ExpressionEngineRequirement",
                        "requirements": [
                            {
                                "class": "DockerRequirement",
                                "dockerPull": "rabix/js-engine"
                            }
                        ]
                    }
                ],
                "sbg:toolkitVersion": "2.0.1",
                "sbg:toolkit": "HISAT2",
                "sbg:sbgMaintained": false,
                "sbg:revision": 3,
                "sbg:toolAuthor": "Johns Hopkins University",
                "outputs": [
                    {
                        "description": "Compressed reference and index files.",
                        "type": [
                            "File"
                        ],
                        "outputBinding": {
                            "glob": "*HISAT2-2.0.1.tar",
                            "sbg:inheritMetadataFrom": "#references"
                        },
                        "sbg:fileTypes": "TAR",
                        "label": "Index",
                        "id": "#tar_out"
                    }
                ],
                "x": 218.33333333333346,
                "sbg:job": {
                    "allocatedResources": {
                        "mem": 240000,
                        "cpu": 32
                    },
                    "inputs": {
                        "bmax": null,
                        "nodc": false,
                        "no_auto": true,
                        "localoffrate": null,
                        "ss": {
                            "class": "File",
                            "path": "/path/bla1.bla",
                            "secondaryFiles": [],
                            "size": 0
                        },
                        "seed": null,
                        "references": [
                            {
                                "class": "File",
                                "path": "/path/to/references-1.fa",
                                "secondaryFiles": [],
                                "size": 0
                            },
                            {
                                "class": "File",
                                "path": "/path/to/references-2.ext",
                                "secondaryFiles": [],
                                "size": 0
                            }
                        ],
                        "noref": false,
                        "snp": {
                            "class": "File",
                            "path": "/path/bla.bla",
                            "secondaryFiles": [],
                            "size": 0
                        },
                        "dcv": null,
                        "large_index": true,
                        "exon": {
                            "class": "File",
                            "path": "/path/bla2.bla",
                            "secondaryFiles": [],
                            "size": 0
                        },
                        "localftabchars": null,
                        "ftabchars": null,
                        "offrate": null,
                        "bmaxdivn": null,
                        "justref": false
                    }
                },
                "sbg:categories": [
                    "Indexing",
                    "Alignment"
                ],
                "stdout": "",
                "sbg:license": "GPLv3 license",
                "sbg:project": "jexnaex/hisat2-2-0-1-demo",
                "sbg:createdOn": 1473014334,
                "class": "CommandLineTool",
                "sbg:contributors": [
                    "jexnaex"
                ],
                "cwlVersion": "sbg:draft-2",
                "description": "__HISAT2 Build__ builds a HISAT2 index from a set of DNA sequences. hisat2-build outputs a set of 8 files with suffixes .1.ht2, .2.ht2, .3.ht2, .4.ht2, .5.ht2, .6.ht2, .7.ht2, and .8.ht2. In the case of a large index these suffixes will have a ht2l termination. These files together constitute the index: they are all that is needed to align reads to that reference. The original sequence FASTA files are no longer used by HISAT2 once the index is built.\n\nUse of Karkkainen's blockwise algorithm allows hisat2-build to trade off between running time and memory usage. hisat2-build has three options governing how it makes this trade: [-p/--packed], --bmax/--bmaxdivn, and --dcv. By default, hisat2-build will automatically search for the settings that yield the best running time without exhausting memory. This behavior can be disabled using the -a/--noauto option.\n\nThe indexer provides options pertaining to the \"shape\" of the index, e.g. --offrate governs the fraction of Burrows-Wheeler rows that are \"marked\" (i.e., the density of the suffix-array sample; see the original FM Index paper for details). All of these options are potentially profitable trade-offs depending on the application. They have been set to defaults that are reasonable for most cases according to our experiments. See Performance tuning for details.\n\nhisat2-build can generate either small or large indexes. The wrapper will decide which based on the length of the input genome. If the reference does not exceed 4 billion characters but a large index is preferred, the user can specify --large-index to force hisat2-build to build a large index instead.\n\nThe HISAT2 index is based on the FM Index of Ferragina and Manzini, which in turn is based on the Burrows-Wheeler transform. The algorithm used to build the index is based on the blockwise algorithm of Karkkainen.\n\n__Hints__\n\n- Exon and splice sites files should be specified together. Input files for these two options can be generated from  HISAT2 ExtractExons  and HISAT2 ExtractSpliceSites apps.\n- Options --bmax, --bmaxdivn, and --dcv should only be set by advanced users.  HISAT automatically sets these parameters to their optimal values.\n- We suggest to use --justref for large genomes, or when a large SNP file is used. The tool will generate an index without using this option. But the alignment will probably fail.\n\n\n__Common issues__\n\nIf the reference is to big, or when building the index with --snp, --ss, --exon or their combination, large index might have to be forced using the 'Force large index' option.",
                "sbg:latestRevision": 3,
                "sbg:image_url": null,
                "sbg:links": [
                    {
                        "label": "Homepage",
                        "id": "https://ccb.jhu.edu/software/hisat2/manual.shtml#the-hisat2-build-indexer"
                    },
                    {
                        "label": "Source code",
                        "id": "ftp://ftp.ccb.jhu.edu/pub/infphilo/hisat2/downloads/hisat2-2.0.4-source.zip"
                    },
                    {
                        "label": "Wiki",
                        "id": "https://wiki.rc.ufl.edu/doc/HISAT2"
                    },
                    {
                        "label": "Download",
                        "id": "ftp://ftp.ccb.jhu.edu/pub/infphilo/hisat2/downloads/hisat2-2.0.4-source.zip"
                    },
                    {
                        "label": "Publication",
                        "id": "http://www.nature.com/nmeth/journal/vaop/ncurrent/full/nmeth.3317.html"
                    }
                ],
                "arguments": [
                    {
                        "prefix": "-p",
                        "valueFrom": {
                            "script": "{\n    references = [].concat($job.inputs.references)\n\text = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n    if (ext === 'tar'){\n    \tcmd = \"\"\n    \n    }\n  \telse {\n    \tcmd = $job.allocatedResources.cpu\n    }\n\treturn cmd\n\n}",
                            "class": "Expression",
                            "engine": "#cwl-js-engine"
                        },
                        "separate": false
                    },
                    {
                        "position": 2,
                        "valueFrom": {
                            "script": "{\n  references = [].concat($job.inputs.references)\n\text = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n    if (ext === 'tar'){\n    \tcmd = \"\"\n    \n    }\n    else {\n      references = [].concat($job.inputs.references)\n      var base = \"\"\n      ref_path = \"\"\n      for (var i =0; i < references.length-1; i++){\n        var ext = references[i].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n        if (ext === 'bz2' || ext === 'gz') {\n          base = base.concat(references[i].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-2).join(\".\")+\".\")\n          ref_path = ref_path.concat(references[i].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-2).join(\".\")+\"* \")\n        }\n        else {\n          base = base.concat(references[i].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")+\".\")\n          ref_path = ref_path.concat(references[i].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")+\"* \")\n        }\n      }\n      ext = references[references.length-1].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n        if (ext === 'bz2' || ext === 'gz') {\n          base = base.concat(references[references.length-1].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-2).join(\".\"))\n          ref_path = ref_path.concat(references[i].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-2).join(\".\")+\"* \")\n        }\n        else {\n          base = base.concat(references[references.length-1].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\"))\n          ref_path = ref_path.concat(references[i].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")+\"* \")\n        }\n      var snp = \"\"\n      if ($job.inputs.snp){\n        snp = \"_\" + $job.inputs.snp.path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")\n      }\n      var ss = \"\"\n      if ($job.inputs.ss){\n      \tss = \"_\" + $job.inputs.ss.path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")\n      }\n      var exon = \"\"\n      if ($job.inputs.exon){\n      \texon = \"_\" + $job.inputs.exon.path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")\n      }\n      base = base + snp + ss + exon\n      cmd =\"index/\" + base + \"_HISAT2-2.0.1\"\n    }\n  return cmd\n\n}",
                            "class": "Expression",
                            "engine": "#cwl-js-engine"
                        },
                        "separate": true
                    },
                    {
                        "position": 3,
                        "valueFrom": {
                            "script": "{\n  references = [].concat($job.inputs.references)\n\text = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n    if (ext === 'tar'){\n    \tcmd = \"\"\n    \n    }\n    else {\n      references = [].concat($job.inputs.references)\n      var base = \"\"\n      ref_path = \"\"\n      for (var i =0; i < references.length-1; i++){\n        var ext = references[i].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n        if (ext === 'bz2' || ext === 'gz') {\n          base = base.concat(references[i].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-2).join(\".\")+\".\")\n          ref_path = ref_path.concat(references[i].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-2).join(\".\")+\"* \")\n        }\n        else {\n          base = base.concat(references[i].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")+\".\")\n          ref_path = ref_path.concat(references[i].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")+\"* \")\n        }\n      }\n      ext = references[references.length-1].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n        if (ext === 'bz2' || ext === 'gz') {\n          base = base.concat(references[references.length-1].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-2).join(\".\"))\n          ref_path = ref_path.concat(references[i].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-2).join(\".\")+\"* \")\n        }\n        else {\n          base = base.concat(references[references.length-1].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\"))\n          ref_path = ref_path.concat(references[i].path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")+\"* \")\n        }\n      var snp = \"\"\n      if ($job.inputs.snp){\n        snp = \"_\" + $job.inputs.snp.path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")\n      }\n      var ss = \"\"\n      if ($job.inputs.ss){\n      \tss = \"_\" + $job.inputs.ss.path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")\n      }\n      var exon = \"\"\n      if ($job.inputs.exon){\n      \texon = \"_\" + $job.inputs.exon.path.split(\"/\").slice(-1)[0].split(\".\").slice(0,-1).join(\".\")\n      }\n      base = base + snp + ss + exon\n      cmd =\"&& tar -vcf \" + base + \"_HISAT2-2.0.1.tar index/\"\n    }\n  return cmd\n\n}",
                            "class": "Expression",
                            "engine": "#cwl-js-engine"
                        },
                        "separate": false
                    }
                ],
                "sbg:validationErrors": [],
                "baseCommand": [
                    {
                        "script": "{\n  \treferences = [].concat($job.inputs.references)\n\text = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n    if (ext === 'tar'){\n    \tcmd = \"echo No indexing required, tar provided, assuming it is indexed reference.\"\n    \n    }\n  \telse {\n  \t\tcmd = 'mkdir index && /opt/hisat2/hisat2-build'\n  \t}\n    return cmd\n\n}",
                        "class": "Expression",
                        "engine": "#cwl-js-engine"
                    }
                ],
                "hints": [
                    
                ],
                "stdin": "",
                "temporaryFailCodes": [],
                "sbg:modifiedOn": 1475502253,
                "inputs": [
                    {
                        "description": "Splice site file produced by HISAT2 Extract Splice Sites.",
                        "sbg:fileTypes": "TXT",
                        "type": [
                            "null",
                            "File"
                        ],
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "valueFrom": {
                                "script": "{\n  \tcmd = \"\"\n    references = [].concat($job.inputs.references)\n    ext = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n      if (ext === 'tar'){\n          cmd = \"\"\n\n      }\n      else {\n        if ($job.inputs.ss != undefined)\n        cmd = \"--ss \" + $job.inputs.ss.path\n      }\n      return cmd\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            }
                        },
                        "sbg:category": "Input files",
                        "label": "Splice sites file",
                        "id": "#ss",
                        "required": false
                    },
                    {
                        "description": "SNP file produced by HISAT2 Extract SNPs-Haplotypes UCSC/VCF.",
                        "sbg:fileTypes": "SNP",
                        "type": [
                            "null",
                            "File"
                        ],
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "valueFrom": {
                                "script": "{\n    cmd =\"\"\n    references = [].concat($job.inputs.references)\n    ext = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n      if (ext === 'tar'){\n          cmd = \"\"\n\n      }\n      else {\n        if ($job.inputs.snp != undefined)\n        cmd = \"--snp \" + $job.inputs.snp.path\n      }\n      return cmd\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            }
                        },
                        "sbg:category": "Input files",
                        "label": "SNP file",
                        "id": "#snp",
                        "required": false
                    },
                    {
                        "description": "Seed for rundom number generator.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "valueFrom": {
                                "script": "{\n  \tcmd=\"\"\n    references = [].concat($job.inputs.references)\n    ext = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n      if (ext === 'tar'){\n          cmd = \"\"\n\n      }\n      else {\n        if ($job.inputs.seed)\n        cmd = \"--seed \" + $job.inputs.seed\n      }\n      return cmd\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            }
                        },
                        "sbg:category": "Options",
                        "label": "Seed",
                        "id": "#seed",
                        "required": false
                    },
                    {
                        "description": "List of files with ref sequences.",
                        "sbg:fileTypes": "FA, FASTA, FA.GZ, FASTA.GZ",
                        "id": "#references",
                        "type": [
                            {
                                "name": "references",
                                "type": "array",
                                "items": "File"
                            }
                        ],
                        "inputBinding": {
                            "itemSeparator": " ",
                            "sbg:cmdInclude": true,
                            "position": 1,
                            "valueFrom": {
                                "script": "{\n    references = [].concat($job.inputs.references)\n    var cmd = \"\"\n    ext = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n      if (ext === 'tar'){\n          cmd = \"\"\n\n      }\n      else {\n        for (var i=0;i < references.length-1;i++){\n         cmd = cmd.concat(references[i].path+\",\")\n        \n        }\n        cmd = cmd.concat(references[references.length-1].path)\n      }\n  \treturn cmd\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            },
                            "separate": false
                        },
                        "sbg:category": "Input files",
                        "label": "References",
                        "sbg:stageInput": "link",
                        "required": true
                    },
                    {
                        "sbg:altPrefix": "-o",
                        "description": "SA is sampled every 2^offRate BWT chars (default: 5).",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "5",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "valueFrom": {
                                "script": "{\n  \tcmd=\"\"\n    references = [].concat($job.inputs.references)\n    ext = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n      if (ext === 'tar'){\n          cmd = \"\"\n\n      }\n      else {\n        if($job.inputs.offrate)\n        cmd = \"--offrate \" + $job.inputs.offrate\n      }\n      return cmd\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            }
                        },
                        "sbg:category": "Options",
                        "label": "Sampling rate",
                        "id": "#offrate",
                        "required": false
                    },
                    {
                        "sbg:altPrefix": "-r",
                        "description": "Don't build .3/.4.bt2 (packed reference) portion.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "valueFrom": {
                                "script": "{\t\n  \tcmd =\"\"\n    references = [].concat($job.inputs.references)\n    ext = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n      if (ext === 'tar'){\n          cmd = \"\"\n\n      }\n      else {\n        if($job.inputs.noref)\n        cmd = \"--noref\"\n      }\n      return cmd\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            }
                        },
                        "sbg:category": "Options",
                        "label": "Disable building packed reference",
                        "id": "#noref",
                        "required": false
                    },
                    {
                        "description": "Disable diff-cover (algorithm becomes quadratic).",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "valueFrom": {
                                "script": "{\t\n  \tcmd =\"\"\n    references = [].concat($job.inputs.references)\n    ext = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n      if (ext === 'tar'){\n          cmd = \"\"\n\n      }\n      else {\n        if($job.inputs.nodc) \n        cmd = \"--nodc\"\n      }\n \treturn cmd     \n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            }
                        },
                        "sbg:category": "Options",
                        "label": "No diff-cover",
                        "id": "#nodc",
                        "required": false
                    },
                    {
                        "sbg:altPrefix": "-a",
                        "description": "Disable automatic -p/--bmax/--dcv memory-fitting.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "valueFrom": {
                                "script": "{\n    cmd =\"\"\n\treferences = [].concat($job.inputs.references)\n\text = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n    if (ext === 'tar'){\n    \tcmd = \"\"\n    \n    }\n    else {\n      if ($job.inputs.no_auto)\n      cmd = \"--noauto\"\n    }\n\treturn cmd\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            }
                        },
                        "sbg:category": "Options",
                        "label": "Disable automatic memory fitting",
                        "id": "#no_auto",
                        "required": false
                    },
                    {
                        "description": "SA (local) is sampled every 2^offRate BWT chars (default: 3).",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "3",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "valueFrom": {
                                "script": "{\n  \tcmd = \"\"\n    references = [].concat($job.inputs.references)\n    ext = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n      if (ext === 'tar'){\n          cmd = \"\"\n\n      }\n      else {\n        if ($job.inputs.localoffrate)\n        cmd = \"--localoffrate \" + $job.inputs.localoffrate\n      }\n      return cmd\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            }
                        },
                        "sbg:category": "Options",
                        "label": "Local sample rate",
                        "id": "#localoffrate",
                        "required": false
                    },
                    {
                        "description": "# of chars consumed in initial lookup in a local index (default: 6).",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "6",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "valueFrom": {
                                "script": "{\t\n  \tcmd = \"\"\n    references = [].concat($job.inputs.references)\n    ext = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n      if (ext === 'tar'){\n          cmd = \"\"\n\n      }\n      else {\n        if ($job.inputs.localftabchars)\n        cmd = \"--localftabchars \" + $job.inputs.localftabchars\n      }\n      return cmd\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            }
                        },
                        "sbg:category": "Options",
                        "label": "Number of chars in lookup (local)",
                        "id": "#localftabchars",
                        "required": false
                    },
                    {
                        "description": "Force generated index to be 'large', even if ref has fewer than 4 billion nucleotides.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "valueFrom": {
                                "script": "{\n    cmd =\"\"\n\treferences = [].concat($job.inputs.references)\n\text = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n    if (ext === 'tar'){\n    \tcmd = \"\"\n    \n    }\n    else {\n      if ($job.inputs.large_index)\n      cmd = \"--large-index\"\n    }\n\treturn cmd\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            }
                        },
                        "sbg:category": "Options",
                        "label": "Force large index",
                        "id": "#large_index",
                        "required": false
                    },
                    {
                        "description": "Just build .3/.4.bt2 (packed reference) portion.",
                        "type": [
                            "null",
                            "boolean"
                        ],
                        "sbg:toolDefaultValue": "false",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "valueFrom": {
                                "script": "{\t\n  \tcmd=\"\"\n    references = [].concat($job.inputs.references)\n    ext = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n      if (ext === 'tar'){\n          cmd = \"\"\n\n      }\n      else {\n        if($job.inputs.justref)\n        cmd = \"--justref\"\n      }\n      return cmd\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            }
                        },
                        "sbg:category": "Options",
                        "label": "Build only packed portion",
                        "id": "#justref",
                        "required": false
                    },
                    {
                        "sbg:altPrefix": "-t",
                        "description": "# of chars consumed in initial lookup (default: 10).",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "10",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "valueFrom": {
                                "script": "{\n  \tcmd=\"\"\n    references = [].concat($job.inputs.references)\n    ext = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n      if (ext === 'tar'){\n          cmd = \"\"\n\n      }\n      else {\n        if($job.inputs.ftabchars)\n        cmd = \"--ftabchars \" + $job.inputs.ftabchars\n      }\n      return cmd\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            }
                        },
                        "sbg:category": "Options",
                        "label": "Number of chars in lookup",
                        "id": "#ftabchars",
                        "required": false
                    },
                    {
                        "description": "Exon file produced by HISAT2 Extract Exons.",
                        "sbg:fileTypes": "TXT",
                        "type": [
                            "null",
                            "File"
                        ],
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "valueFrom": {
                                "script": "{\n    cmd = \"\"\n    references = [].concat($job.inputs.references)\n    ext = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n      if (ext === 'tar'){\n          cmd = \"\"\n\n      }\n      else {\n        if ($job.inputs.exon != undefined)\n        cmd = \"--exon \" + $job.inputs.exon.path\n      }\n      return cmd\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            }
                        },
                        "sbg:category": "Input files",
                        "label": "Exon file",
                        "id": "#exon",
                        "required": false
                    },
                    {
                        "description": "Diff-cover period for blockwise (default: 1024).",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "1024",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "valueFrom": {
                                "script": "{\n  \tcmd=\"\"\n    references = [].concat($job.inputs.references)\n    ext = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n      if (ext === 'tar'){\n          cmd = \"\"\n\n      }\n      else {\n        if($job.inputs.dcv)\n        cmd = \"--dcv \" + $job.inputs.dcv\n      }\n      return cmd\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            }
                        },
                        "sbg:category": "Options",
                        "label": "Diff-cover period",
                        "id": "#dcv",
                        "required": false
                    },
                    {
                        "description": "Max bucket size as divisor of reference length (default: 4).",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "4",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "valueFrom": {
                                "script": "{\t\n  \tcmd =\"\"\n    references = [].concat($job.inputs.references)\n    ext = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n      if (ext === 'tar'){\n          cmd = \"\"\n\n      }\n      else {\n        if($job.inputs.bmaxdivn)\n        cmd = \"--bmaxdivn \" + $job.inputs.bmaxdivn\n      }\n      return cmd\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            }
                        },
                        "sbg:category": "Options",
                        "label": "Max bucket size (as divisior)",
                        "id": "#bmaxdivn",
                        "required": false
                    },
                    {
                        "description": "Max bucket size for blockwise suffix-array builder.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "valueFrom": {
                                "script": "{   \n  \tcmd =\"\"\n    references = [].concat($job.inputs.references)\n    ext = references[0].path.split(\"/\").slice(-1)[0].split(\".\").slice(-1)[0]\n      if (ext === 'tar'){\n          cmd = \"\"\n\n      }\n      else {\n        if ($job.inputs.bmax)\n        cmd = \"--bmax \" + $job.inputs.bmax\n      }\n      return cmd\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            }
                        },
                        "sbg:category": "Options",
                        "label": "Max bucket size",
                        "id": "#bmax",
                        "required": false
                    }
                ],
                "id": "jexnaex/hisat2-2-0-1-demo/hisat2-build-2-0-1/3",
                "sbg:cmdPreview": "mkdir index && /opt/hisat2/hisat2-build -p32 /path/to/references-1.fa,/path/to/references-2.ext  index/references-1.references-2_bla_bla1_bla2_HISAT2-2.0.1 && tar -vcf references-1.references-2_bla_bla1_bla2_HISAT2-2.0.1.tar index/"
            },
            "sbg:y": 345.4455820719403,
            "inputs": [
                {
                    "id": "#HISAT2_Build.ss",
                    "source": [
                        "#ss"
                    ]
                },
                {
                    "id": "#HISAT2_Build.snp",
                    "source": [
                        "#snp"
                    ]
                },
                {
                    "id": "#HISAT2_Build.seed"
                },
                {
                    "id": "#HISAT2_Build.references",
                    "source": [
                        "#reference_files"
                    ]
                },
                {
                    "id": "#HISAT2_Build.offrate"
                },
                {
                    "id": "#HISAT2_Build.noref"
                },
                {
                    "id": "#HISAT2_Build.nodc"
                },
                {
                    "id": "#HISAT2_Build.no_auto"
                },
                {
                    "id": "#HISAT2_Build.localoffrate"
                },
                {
                    "id": "#HISAT2_Build.localftabchars"
                },
                {
                    "id": "#HISAT2_Build.large_index"
                },
                {
                    "id": "#HISAT2_Build.justref"
                },
                {
                    "id": "#HISAT2_Build.ftabchars"
                },
                {
                    "id": "#HISAT2_Build.exon",
                    "source": [
                        "#exon"
                    ]
                },
                {
                    "id": "#HISAT2_Build.dcv"
                },
                {
                    "id": "#HISAT2_Build.bmaxdivn"
                },
                {
                    "id": "#HISAT2_Build.bmax"
                }
            ],
            "id": "#HISAT2_Build",
            "outputs": [
                {
                    "id": "#HISAT2_Build.tar_out"
                }
            ]
        },
        {
            "sbg:x": 693.3333333333337,
            "run": {
                "y": 47.1122487386068,
                "sbg:toolkitVersion": "1.140",
                "sbg:createdBy": "bix-demo",
                "label": "Picard SortSam",
                "appUrl": "/u/bix-demo/picard-1-140-demo/apps/#bix-demo/picard-1-140-demo/picard-sortsam-1-140/3",
                "sbg:modifiedBy": "mladenlSBG",
                "outputs": [
                    {
                        "description": "Sorted BAM or SAM file.",
                        "type": [
                            "null",
                            "File"
                        ],
                        "outputBinding": {
                            "glob": "*.sorted.?am",
                            "sbg:inheritMetadataFrom": "#input_bam",
                            "secondaryFiles": [
                                "^.bai",
                                ".bai"
                            ],
                            "sbg:metadata": {
                                "__inherit__": "input_bam"
                            }
                        },
                        "sbg:fileTypes": "BAM, SAM",
                        "label": "Sorted BAM/SAM",
                        "id": "#sorted_bam"
                    }
                ],
                "successCodes": [],
                "requirements": [
                    {
                        "engineCommand": "cwl-engine.js",
                        "id": "#cwl-js-engine",
                        "class": "ExpressionEngineRequirement",
                        "requirements": [
                            {
                                "class": "DockerRequirement",
                                "dockerPull": "rabix/js-engine"
                            }
                        ]
                    }
                ],
                "sbg:revisionsInfo": [
                    {
                        "sbg:modifiedOn": 1450911168,
                        "sbg:revision": 0,
                        "sbg:revisionNotes": null,
                        "sbg:modifiedBy": "bix-demo"
                    },
                    {
                        "sbg:modifiedOn": 1450911169,
                        "sbg:revision": 1,
                        "sbg:revisionNotes": null,
                        "sbg:modifiedBy": "bix-demo"
                    },
                    {
                        "sbg:modifiedOn": 1450911170,
                        "sbg:revision": 2,
                        "sbg:revisionNotes": null,
                        "sbg:modifiedBy": "bix-demo"
                    },
                    {
                        "sbg:modifiedOn": 1476869720,
                        "sbg:revision": 3,
                        "sbg:revisionNotes": "Modified \"sort_order\" default value.",
                        "sbg:modifiedBy": "mladenlSBG"
                    }
                ],
                "sbg:toolkit": "Picard",
                "sbg:sbgMaintained": false,
                "sbg:revision": 3,
                "sbg:toolAuthor": "Broad Institute",
                "sbg:id": "admin/sbg-public-data/picard-sortsam-1-140/3",
                "x": 693.3333333333337,
                "sbg:job": {
                    "allocatedResources": {
                        "mem": 2048,
                        "cpu": 1
                    },
                    "inputs": {
                        "memory_per_job": 2048,
                        "input_bam": {
                            "path": "/root/dir/example.tested.bam"
                        },
                        "output_type": null,
                        "sort_order": "Coordinate",
                        "create_index": null
                    }
                },
                "sbg:categories": [
                    "SAM/BAM-Processing"
                ],
                "stdout": "",
                "sbg:license": "MIT License, Apache 2.0 Licence",
                "sbg:project": "bix-demo/picard-1-140-demo",
                "sbg:createdOn": 1450911168,
                "class": "CommandLineTool",
                "sbg:contributors": [
                    "bix-demo",
                    "mladenlSBG"
                ],
                "cwlVersion": "sbg:draft-2",
                "description": "Picard SortSam sorts the input SAM or BAM. Input and output formats are determined by the file extension.",
                "sbg:latestRevision": 3,
                "sbg:image_url": null,
                "sbg:links": [
                    {
                        "label": "Homepage",
                        "id": "http://broadinstitute.github.io/picard/index.html"
                    },
                    {
                        "label": "Source Code",
                        "id": "https://github.com/broadinstitute/picard/releases/tag/1.138"
                    },
                    {
                        "label": "Wiki",
                        "id": "http://broadinstitute.github.io/picard/"
                    },
                    {
                        "label": "Download",
                        "id": "https://github.com/broadinstitute/picard/zipball/master"
                    },
                    {
                        "label": "Publication",
                        "id": "http://broadinstitute.github.io/picard/"
                    }
                ],
                "arguments": [
                    {
                        "separate": false,
                        "prefix": "OUTPUT=",
                        "valueFrom": {
                            "script": "{\n  filename = $job.inputs.input_bam.path\n  ext = $job.inputs.output_type\n\nif (ext === \"BAM\")\n{\n    return filename.split('.').slice(0, -1).concat(\"sorted.bam\").join(\".\").replace(/^.*[\\\\\\/]/, '')\n    }\n\nelse if (ext === \"SAM\")\n{\n    return filename.split('.').slice(0, -1).concat(\"sorted.sam\").join('.').replace(/^.*[\\\\\\/]/, '')\n}\n\nelse \n{\n\treturn filename.split('.').slice(0, -1).concat(\"sorted.\"+filename.split('.').slice(-1)[0]).join(\".\").replace(/^.*[\\\\\\/]/, '')\n}\n}",
                            "class": "Expression",
                            "engine": "#cwl-js-engine"
                        },
                        "position": 0
                    },
                    {
                        "position": 1000,
                        "valueFrom": {
                            "script": "{\n  filename = $job.inputs.input_bam.path\n  \n  /* figuring out output file type */\n  ext = $job.inputs.output_type\n  if (ext === \"BAM\")\n  {\n    out_extension = \"BAM\"\n  }\n  else if (ext === \"SAM\")\n  {\n    out_extension = \"SAM\"\n  }\n  else \n  {\n\tout_extension = filename.split('.').slice(-1)[0].toUpperCase()\n  }  \n  \n  /* if exist moving .bai in bam.bai */\n  if ($job.inputs.create_index === 'True' && $job.inputs.sort_order === 'Coordinate' && out_extension == \"BAM\")\n  {\n    \n    old_name = filename.split('.').slice(0, -1).concat('sorted.bai').join('.').replace(/^.*[\\\\\\/]/, '')\n    new_name = filename.split('.').slice(0, -1).concat('sorted.bam.bai').join('.').replace(/^.*[\\\\\\/]/, '')\n    return \"; mv \" + \" \" + old_name + \" \" + new_name\n  }\n\n}",
                            "class": "Expression",
                            "engine": "#cwl-js-engine"
                        },
                        "separate": true
                    }
                ],
                "sbg:validationErrors": [],
                "baseCommand": [
                    "java",
                    {
                        "script": "{   \n  if($job.inputs.memory_per_job){\n    return '-Xmx'.concat($job.inputs.memory_per_job, 'M')\n  }   \n  \treturn '-Xmx2048M'\n}",
                        "class": "Expression",
                        "engine": "#cwl-js-engine"
                    },
                    "-jar",
                    "/opt/picard-tools-1.140/picard.jar",
                    "SortSam"
                ],
                "hints": [
                    {
                        "dockerImageId": "eab0e70b6629",
                        "class": "DockerRequirement",
                        "dockerPull": "images.sbgenomics.com/mladenlsbg/picard:1.140"
                    },
                    {
                        "class": "sbg:CPURequirement",
                        "value": 1
                    },
                    {
                        "class": "sbg:MemRequirement",
                        "value": {
                            "script": "{\n  if($job.inputs.memory_per_job){\n  \treturn $job.inputs.memory_per_job\n  }\n  \treturn 2048\n}",
                            "class": "Expression",
                            "engine": "#cwl-js-engine"
                        }
                    }
                ],
                "stdin": "",
                "sbg:revisionNotes": "Modified \"sort_order\" default value.",
                "temporaryFailCodes": [],
                "sbg:modifiedOn": 1476869720,
                "inputs": [
                    {
                        "description": "Validation stringency for all SAM files read by this program. Setting stringency to SILENT can improve performance when processing a BAM file in which variable-length data (read, qualities, tags) do not otherwise need to be decoded. This option can be set to 'null' to clear the default value. Possible values: {STRICT, LENIENT, SILENT}.",
                        "type": [
                            "null",
                            {
                                "symbols": [
                                    "STRICT",
                                    "LENIENT",
                                    "SILENT"
                                ],
                                "name": "validation_stringency",
                                "type": "enum"
                            }
                        ],
                        "sbg:toolDefaultValue": "SILENT",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "VALIDATION_STRINGENCY=",
                            "valueFrom": {
                                "script": "{\n  if ($job.inputs.validation_stringency)\n  {\n    return $job.inputs.validation_stringency\n  }\n  else\n  {\n    return \"SILENT\"\n  }\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            },
                            "separate": false
                        },
                        "sbg:category": "Other input types",
                        "label": "Validation stringency",
                        "id": "#validation_stringency",
                        "required": false
                    },
                    {
                        "sbg:altPrefix": "SO",
                        "description": "Sort order of the output file. Possible values: {unsorted, queryname, coordinate}.",
                        "type": [
                            {
                                "symbols": [
                                    "Unsorted",
                                    "Queryname",
                                    "Coordinate"
                                ],
                                "name": "sort_order",
                                "type": "enum"
                            }
                        ],
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "prefix": "SORT_ORDER=",
                            "valueFrom": {
                                "script": "{\n  p = $job.inputs.sort_order.toLowerCase()\n  return p\n}",
                                "class": "Expression",
                                "engine": "#cwl-js-engine"
                            },
                            "position": 3
                        },
                        "sbg:category": "Other input types",
                        "label": "Sort order",
                        "id": "#sort_order",
                        "required": true
                    },
                    {
                        "description": "This parameter indicates whether to suppress job-summary info on System.err. This option can be set to 'null' to clear the default value. Possible values: {true, false}.",
                        "type": [
                            "null",
                            {
                                "symbols": [
                                    "True",
                                    "False"
                                ],
                                "name": "quiet",
                                "type": "enum"
                            }
                        ],
                        "sbg:toolDefaultValue": "False",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "QUIET=",
                            "separate": false
                        },
                        "sbg:category": "Other input types",
                        "label": "Quiet",
                        "id": "#quiet",
                        "required": false
                    },
                    {
                        "description": "Since Picard tools can output both SAM and BAM files, user can choose the format of the output file.",
                        "type": [
                            "null",
                            {
                                "symbols": [
                                    "BAM",
                                    "SAM",
                                    "SAME AS INPUT"
                                ],
                                "name": "output_type",
                                "type": "enum"
                            }
                        ],
                        "sbg:toolDefaultValue": "SAME AS INPUT",
                        "sbg:category": "Other input types",
                        "label": "Output format",
                        "id": "#output_type",
                        "required": false
                    },
                    {
                        "description": "Amount of RAM memory to be used per job. Defaults to 2048 MB for single threaded jobs.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "2048",
                        "label": "Memory per job",
                        "id": "#memory_per_job",
                        "required": false
                    },
                    {
                        "description": "When writing SAM files that need to be sorted, this parameter will specify the number of records stored in RAM before spilling to disk. Increasing this number reduces the number of file handles needed to sort a SAM file, and increases the amount of RAM needed. This option can be set to 'null' to clear the default value.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "500000",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "MAX_RECORDS_IN_RAM=",
                            "separate": false
                        },
                        "sbg:category": "Other input types",
                        "label": "Max records in RAM",
                        "id": "#max_records_in_ram",
                        "required": false
                    },
                    {
                        "sbg:altPrefix": "I",
                        "sbg:fileTypes": "BAM, SAM",
                        "type": [
                            "File"
                        ],
                        "description": "The BAM or SAM file to sort.",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "prefix": "INPUT=",
                            "position": 1
                        },
                        "sbg:category": "File inputs",
                        "label": "Input BAM",
                        "id": "#input_bam",
                        "required": true
                    },
                    {
                        "description": "This parameter indicates whether to create a BAM index when writing a coordinate-sorted BAM file. This option can be set to 'null' to clear the default value. Possible values: {true, false}.",
                        "type": [
                            "null",
                            {
                                "symbols": [
                                    "True",
                                    "False"
                                ],
                                "name": "create_index",
                                "type": "enum"
                            }
                        ],
                        "sbg:toolDefaultValue": "False",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "separate": false,
                            "prefix": "CREATE_INDEX=",
                            "position": 5
                        },
                        "sbg:category": "Other input types",
                        "label": "Create index",
                        "id": "#create_index",
                        "required": false
                    },
                    {
                        "description": "Compression level for all compressed files created (e.g. BAM and GELI). This option can be set to 'null' to clear the default value.",
                        "type": [
                            "null",
                            "int"
                        ],
                        "sbg:toolDefaultValue": "5",
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "COMPRESSION_LEVEL=",
                            "separate": false
                        },
                        "sbg:category": "Other input types",
                        "label": "Compression level",
                        "id": "#compression_level",
                        "required": false
                    }
                ],
                "id": "bix-demo/picard-1-140-demo/picard-sortsam-1-140/3",
                "sbg:cmdPreview": "java -Xmx2048M -jar /opt/picard-tools-1.140/picard.jar SortSam OUTPUT=example.tested.sorted.bam INPUT=/root/dir/example.tested.bam SORT_ORDER=coordinate"
            },
            "sbg:y": 47.1122487386068,
            "inputs": [
                {
                    "id": "#Picard_SortSam.validation_stringency"
                },
                {
                    "default": "Coordinate",
                    "id": "#Picard_SortSam.sort_order"
                },
                {
                    "id": "#Picard_SortSam.quiet"
                },
                {
                    "default": "BAM",
                    "id": "#Picard_SortSam.output_type"
                },
                {
                    "id": "#Picard_SortSam.memory_per_job"
                },
                {
                    "id": "#Picard_SortSam.max_records_in_ram"
                },
                {
                    "id": "#Picard_SortSam.input_bam",
                    "source": [
                        "#HISAT2.out_align"
                    ]
                },
                {
                    "default": "True",
                    "id": "#Picard_SortSam.create_index"
                },
                {
                    "id": "#Picard_SortSam.compression_level"
                }
            ],
            "id": "#Picard_SortSam",
            "outputs": [
                {
                    "id": "#Picard_SortSam.sorted_bam"
                }
            ]
        },
        {
            "scatter": "#SBG_FASTQ_Quality_Detector.fastq",
            "sbg:x": 235.00000933806115,
            "run": {
                "y": 85.44558748055508,
                "sbg:categories": [
                    "FASTQ-Processing"
                ],
                "sbg:createdBy": "bix-demo",
                "label": "SBG FASTQ Quality Detector",
                "appUrl": "/u/bix-demo/sbgtools-demo/apps/#bix-demo/sbgtools-demo/sbg-fastq-quality-detector/8",
                "sbg:modifiedBy": "milan.domazet.sudo",
                "outputs": [
                    {
                        "description": "Source FASTQ file with updated metadata.",
                        "type": [
                            "null",
                            "File"
                        ],
                        "outputBinding": {
                            "glob": "*.fastq",
                            "sbg:inheritMetadataFrom": "#fastq"
                        },
                        "sbg:fileTypes": "FASTQ",
                        "label": "Result",
                        "id": "#result"
                    }
                ],
                "successCodes": [],
                "requirements": [
                    {
                        "fileDef": [
                            {
                                "filename": "sbg_fastq_quality_scale_detector.py",
                                "fileContent": "\"\"\"\nUsage:\n    sbg_fastq_sniff.py --fastq FILE\n\nOptions:\n    -h, --help          Show this message.\n\n    -f, --fastq FILE    Input FASTQ file.\n\n\"\"\"\n\nfrom docopt import docopt\nimport os\nimport gzip\nimport itertools as it\nimport shutil\n\nfrom sdkcwl import *\n\nargs = docopt(__doc__, version='1.0')\n\n\nclass myGzipFile(gzip.GzipFile):\n    def __enter__(self, *args, **kwargs):\n        if self.fileobj is None:\n            raise Exception(\"I/O operation on closed GzipFile object\")\n        return self\n\n    def __exit__(self, *args, **kwargs):\n        self.close()\n\n\ndef extremes(a, b):\n    if a is False:\n        return b, b\n    return min(a[0], b), max(a[1], b)\n\n\ndef walk_qualities(f, sample_size=1000):\n    for i in xrange(sample_size * 4):\n        try:\n            line = f.next()\n        except StopIteration:\n            return\n        if i % 4 == 3:\n            yield line.rstrip(\"\\n\\r\")\n\n\ndef sniff(path):\n    with open(path, 'rb') as f:\n        gz = f.read(2) == '\\x1f\\x8b'\n    opn = myGzipFile if gz else open\n    with opn(path) as f:\n        return get_scale(*map(ord, reduce(extremes, it.chain(*walk_qualities(f)), False)))\n\n\ndef get_scale(ord_min, ord_max):\n    options = {\n        'illumina13': (64, 105),\n        'illumina15': (66, 105),\n        'sanger': (33, 126),\n        'solexa': (59, 105),\n    }\n    fits = [(k, v) for k, v in options.iteritems() if v[0] <= ord_min and v[1] >= ord_max]\n    if not fits:\n        message = 'Quality scale for range (%s, %s) not found.' % (ord_min, ord_max)\n        raise Exception(message)\n        # Return narrowest range\n    return reduce(lambda a, b: a if a[1][1] - a[1][0] < b[1][1] - b[1][0] else b, fits)[0]\n\ncwl_input(args, '--fastq', 'fastq')\ncwl_output('result')\n\nfq = self.inputs.fastq\n\nquality_scale = sniff(fq)\n\noutput_file = fq[fq.rfind('/')+1:]\nshutil.copyfile(fq, output_file)\n\nself.outputs.result = output_file\nself.outputs.result.meta = fq.make_metadata(quality_scale=quality_scale)\n\ncwl_finish()"
                            },
                            {
                                "filename": "sdkcwl.py",
                                "fileContent": "import json\nimport os\n\ndef _get_meta(fpath, reload_job=False):\n    def get_files(o):\n        if isinstance(o, dict) and o.get('class') == 'File':\n            return [o]\n        if isinstance(o, dict):\n            return sum(map(get_files, o.itervalues()), [])\n        if isinstance(o, list):\n            return sum(map(get_files, o), [])\n        return []\n\n    files = getattr(_get_meta, '_files', None)\n    if reload_job or files is None:\n        with open('job.json') as fp:\n            job = json.load(fp)\n        files = {f['path']: f for f in get_files(job['inputs'])}\n    return files[fpath].get('metadata', {})\n\n\nclass _DotDict(dict):\n    def _map(self, attr):\n        key_map = {\n            \"file_type\": \"file_extension\",\n            \"seq_tech\": \"platform\",\n            \"sample\": \"sample_id\",\n            \"library\": \"library_id\",\n            \"platform_unit\": \"platform_unit_id\",\n            \"chunk\": \"file_segment_number\",\n            \"qual_scale\": \"quality_scale\"\n        }\n        if attr in key_map:\n            attr = key_map[attr]\n        return attr\n\n    def __init__(self, *args, **kwargs):\n        super(_DotDict, self).__init__(*args, **kwargs)\n        for arg in args:\n            if isinstance(arg, dict) or isinstance(arg, _DotDict):\n                for k, v in arg.iteritems():\n                    nk = self._map(k)\n                    if k != nk and k in self:\n                        self.pop(k)\n                    self[nk] = v\n        if kwargs:\n            for k, v in kwargs.iteritems():\n                self[self._map(k)] = v\n\n    def __getattr__(self, attr):\n        return self.get(self._map(attr))\n\n    def __setattr__(self, key, value):\n        self.__setitem__(self._map(key), value)\n\n    def __setitem__(self, key, value):\n        super(_DotDict, self).__setitem__(self._map(key), value)\n        self.__dict__.update({self._map(key): value})\n\n    def __delattr__(self, item):\n        self.__delitem__(self._map(item))\n\n    def __delitem__(self, key):\n        super(_DotDict, self).__delitem__(self._map(key))\n        del self.__dict__[self._map(key)]\n\nclass _OldInput(str):\n\n    _meta = None\n\n    @property\n    def meta(self):\n        if self._meta is None:\n            self._meta = _DotDict(_get_meta(self))\n        return self._meta\n    \n    def make_metadata(self, **kwargs):\n        new_meta = _DotDict(self.meta)\n        if kwargs is not None:\n            for key, value in kwargs.iteritems():\n                new_meta[key] = value\n        return new_meta\n\n\nclass _OldOutputBucket(_DotDict):\n    \n    def __setitem__(self, key, value):\n        if isinstance(value, list):\n            super(_OldOutputBucket, self).__setitem__(key, _OldOutputList(value))\n        else:\n            super(_DotDict, self).__setitem__(key, _OldOutput(value))\n\nclass _OldOutput(str):\n\n    _meta = None\n\n    @property\n    def meta(self):\n        if self._meta is None:\n            self._meta = _DotDict()\n        return self._meta\n\n    @meta.setter\n    def meta(self, value):\n        self._meta = _DotDict(value)\n\n\nclass _OldOutputList(list):\n\n    def add_file(self, name):\n        new_file = _OldOutput(name)\n        self.append(new_file)\n        return new_file\ndef cwl_input(_args, _new, _old, list=False):\n    _new = _args[_new]\n    if isinstance(_new, str):\n        _new = [_new]\n    if list==False and len(_new) > 1:\n        raise Exception('Number of items provided to a non-list type input.')\n    if len(_new) == 1 and list == False:\n        self.inputs[_old] =  _OldInput(_new[0])\n    else:\n        self.inputs[_old] = map(_OldInput, _new)\n\ndef cwl_param(_args, _new, _old):\n    self.params[_old] = _args[_new]\n\ndef cwl_output(_old, list=False):\n    if list is False:\n        self.outputs[_old] = _OldOutput()\n    else:\n        self.outputs[_old] = _OldOutputList()\n\n\ndef cwl_finish():\n    if not self['outputs']:\n        return\n    if 'cwl_secondary' not in self:\n        self['cwl_secondary'] = {}\n    data = {}\n    for output in self['outputs']:\n        o = self['outputs'][output]\n        sf = self['cwl_secondary'].get(output, None)\n        if isinstance(o, _OldOutputList):\n            file_data = []\n            for f in o:\n                f_dict = {'name': os.path.split(f)[1], \\\n                          'class': 'File', \\\n                          'metadata': f.meta, \\\n                          'path': os.path.join(os.getcwd(), f)}\n                if sf:\n                    f_dict['secondaryFiles'] = [{'path': os.path.join(os.getcwd(), x), \"class\": \"File\"} for x in sf]\n                file_data.append(f_dict)\n        else:\n            file_data = {\n                'name': os.path.split(o)[1],\n                'class': 'File',\n                'metadata': o.meta,\n                'path': os.path.join(os.getcwd(), o)\n            }\n            if sf:\n                file_data['secondaryFiles'] = [{'path': os.path.join(os.getcwd(), x), \"class\": \"File\"} for x in sf]\n        data[output] = file_data\n    with open('cwl.output.json', 'w') as w:\n        json.dump(data, w)\n\ndef cwl_set_secondary(output, secondary_files):\n    if 'cwl_secondary' not in self:\n        self['cwl_secondary'] = {}\n    if not isinstance(secondary_files, list):\n        secondary_files = [secondary_files]\n    self['cwl_secondary'][output] = secondary_files\n\n################################################################################\n\nglobal self\nself = _DotDict(globals())\nif 'inputs' not in self:\n    self['inputs'] = _DotDict()\nif 'outputs' not in self:\n    self['outputs'] =  _OldOutputBucket()\nif 'params' not in self:\n    self['params'] = _DotDict()"
                            }
                        ],
                        "class": "CreateFileRequirement"
                    }
                ],
                "sbg:revisionsInfo": [
                    {
                        "sbg:modifiedOn": 1450911312,
                        "sbg:revision": 0,
                        "sbg:revisionNotes": null,
                        "sbg:modifiedBy": "bix-demo"
                    },
                    {
                        "sbg:modifiedOn": 1450911313,
                        "sbg:revision": 1,
                        "sbg:revisionNotes": null,
                        "sbg:modifiedBy": "bix-demo"
                    },
                    {
                        "sbg:modifiedOn": 1450911313,
                        "sbg:revision": 2,
                        "sbg:revisionNotes": null,
                        "sbg:modifiedBy": "bix-demo"
                    },
                    {
                        "sbg:modifiedOn": 1450911314,
                        "sbg:revision": 3,
                        "sbg:revisionNotes": null,
                        "sbg:modifiedBy": "bix-demo"
                    },
                    {
                        "sbg:modifiedOn": 1472045214,
                        "sbg:revision": 4,
                        "sbg:revisionNotes": null,
                        "sbg:modifiedBy": "milan.domazet.sudo"
                    },
                    {
                        "sbg:modifiedOn": 1473774177,
                        "sbg:revision": 5,
                        "sbg:revisionNotes": "Changed input type to FASTQ and FQ.",
                        "sbg:modifiedBy": "milan.domazet.sudo"
                    },
                    {
                        "sbg:modifiedOn": 1473775728,
                        "sbg:revision": 6,
                        "sbg:revisionNotes": "Added Category.",
                        "sbg:modifiedBy": "vladimirk"
                    },
                    {
                        "sbg:modifiedOn": 1475083591,
                        "sbg:revision": 7,
                        "sbg:revisionNotes": "Fixed Sanger range and moved script to crate files.",
                        "sbg:modifiedBy": "milan.domazet.sudo"
                    },
                    {
                        "sbg:modifiedOn": 1475246089,
                        "sbg:revision": 8,
                        "sbg:revisionNotes": "Reverted Sanger scale to (33,126), until we find a better range.",
                        "sbg:modifiedBy": "milan.domazet.sudo"
                    }
                ],
                "sbg:toolkit": "SBGTools",
                "sbg:sbgMaintained": false,
                "sbg:revision": 8,
                "sbg:toolAuthor": "Seven Bridges Genomics",
                "sbg:id": "admin/sbg-public-data/sbg-fastq-quality-detector/12",
                "x": 235.00000933806115,
                "sbg:job": {
                    "allocatedResources": {
                        "mem": 1000,
                        "cpu": 1
                    },
                    "inputs": {
                        "fastq": {
                            "class": "File",
                            "path": "/path/to/fastq.ext",
                            "secondaryFiles": [],
                            "size": 0
                        }
                    }
                },
                "stdout": "",
                "sbg:license": "Apache License 2.0",
                "sbg:project": "bix-demo/sbgtools-demo",
                "sbg:createdOn": 1450911312,
                "class": "CommandLineTool",
                "sbg:contributors": [
                    "vladimirk",
                    "milan.domazet.sudo",
                    "bix-demo"
                ],
                "cwlVersion": "sbg:draft-2",
                "description": "FASTQ Quality Scale Detector detects which quality encoding scheme was used in your reads and automatically enters the proper value in the \"Quality Scale\" metadata field.",
                "sbg:latestRevision": 8,
                "sbg:image_url": null,
                "sbg:modifiedOn": 1475246089,
                "sbg:validationErrors": [],
                "baseCommand": [
                    "python",
                    "sbg_fastq_quality_scale_detector.py"
                ],
                "hints": [
                    {
                        "dockerImageId": "",
                        "class": "DockerRequirement",
                        "dockerPull": "images.sbgenomics.com/tziotas/sbg_fastq_quality_scale_detector:1.0"
                    },
                    {
                        "class": "sbg:CPURequirement",
                        "value": 1
                    },
                    {
                        "class": "sbg:MemRequirement",
                        "value": 1000
                    }
                ],
                "stdin": "",
                "sbg:revisionNotes": "Reverted Sanger scale to (33,126), until we find a better range.",
                "temporaryFailCodes": [],
                "arguments": [],
                "inputs": [
                    {
                        "description": "FASTQ file.",
                        "sbg:fileTypes": "FASTQ,FQ",
                        "type": [
                            "File"
                        ],
                        "inputBinding": {
                            "sbg:cmdInclude": true,
                            "prefix": "--fastq",
                            "separate": true
                        },
                        "sbg:category": "Input",
                        "label": "Fastq",
                        "id": "#fastq",
                        "required": true
                    }
                ],
                "id": "bix-demo/sbgtools-demo/sbg-fastq-quality-detector/8",
                "sbg:cmdPreview": "python sbg_fastq_quality_scale_detector.py --fastq /path/to/fastq.ext"
            },
            "sbg:y": 85.44558748055508,
            "inputs": [
                {
                    "id": "#SBG_FASTQ_Quality_Detector.fastq",
                    "source": [
                        "#fastq"
                    ]
                }
            ],
            "id": "#SBG_FASTQ_Quality_Detector",
            "outputs": [
                {
                    "id": "#SBG_FASTQ_Quality_Detector.result"
                }
            ]
        }
    ],
    "sbg:sbgMaintained": false,
    "sbg:revision": 6,
    "outputs": [
        {
            "sbg:includeInPorts": true,
            "type": [
                "File"
            ],
            "sbg:x": 1198.3335845338063,
            "sbg:y": -28.333281119662406,
            "source": [
                "#Picard_CollectAlignmentSummaryMetrics.summary_metrics"
            ],
            "label": "summary_metrics",
            "id": "#summary_metrics",
            "required": true
        },
        {
            "sbg:includeInPorts": true,
            "type": [
                "File"
            ],
            "sbg:x": 1203.3336255550487,
            "sbg:y": 228.3333525790114,
            "source": [
                "#HISAT2.out_align"
            ],
            "label": "alignment_file",
            "id": "#alignment_file",
            "required": true
        },
        {
            "sbg:includeInPorts": true,
            "type": [
                "null",
                "File"
            ],
            "sbg:x": 1208.333579169388,
            "sbg:y": 364.99422567397556,
            "source": [
                "#HISAT2.novel_ss_out"
            ],
            "label": "novel_ss_out",
            "id": "#novel_ss_out",
            "required": false
        },
        {
            "sbg:includeInPorts": true,
            "type": [
                "null",
                "File"
            ],
            "sbg:x": 1211.666755570308,
            "sbg:y": 501.66093912366733,
            "source": [
                "#HISAT2.metrics_file"
            ],
            "label": "metrics_file",
            "id": "#metrics_file",
            "required": false
        },
        {
            "sbg:includeInPorts": true,
            "type": [
                "null",
                "File"
            ],
            "sbg:x": 1200.0004140933506,
            "sbg:y": 103.32757216006794,
            "source": [
                "#Picard_SortSam.sorted_bam"
            ],
            "label": "sorted_bam",
            "id": "#sorted_bam",
            "required": false
        }
    ],
    "sbg:categories": [
        "Indexing",
        "Alignment"
    ],
    "sbg:createdOn": 1501518648,
    "class": "Workflow",
    "sbg:contributors": [
        "bixqa"
    ],
    "cwlVersion": "sbg:draft-2",
    "sbg:latestRevision": 6,
    "sbg:image_url": "https://brood.sbgenomics.com/static/bixqa/qa-load-2017-07-31-18/rna-seq-alignment-hisat2-2-0-1/6.png",
    "sbg:revisionsInfo": [
        {
            "sbg:modifiedOn": 1501518648,
            "sbg:revision": 0,
            "sbg:revisionNotes": null,
            "sbg:modifiedBy": "bixqa"
        },
        {
            "sbg:modifiedOn": 1501518648,
            "sbg:revision": 1,
            "sbg:revisionNotes": null,
            "sbg:modifiedBy": "bixqa"
        },
        {
            "sbg:modifiedOn": 1501518648,
            "sbg:revision": 2,
            "sbg:revisionNotes": null,
            "sbg:modifiedBy": "bixqa"
        },
        {
            "sbg:modifiedOn": 1501518648,
            "sbg:revision": 3,
            "sbg:revisionNotes": "create index, bam output",
            "sbg:modifiedBy": "bixqa"
        },
        {
            "sbg:modifiedOn": 1501518648,
            "sbg:revision": 4,
            "sbg:revisionNotes": null,
            "sbg:modifiedBy": "bixqa"
        },
        {
            "sbg:modifiedOn": 1501518648,
            "sbg:revision": 5,
            "sbg:revisionNotes": null,
            "sbg:modifiedBy": "bixqa"
        },
        {
            "sbg:modifiedOn": 1501518648,
            "sbg:revision": 6,
            "sbg:revisionNotes": null,
            "sbg:modifiedBy": "bixqa"
        }
    ],
    "sbg:modifiedOn": 1501518648,
    "sbg:validationErrors": [],
    "sbg:project": "bixqa/qa-load-2017-07-31-18",
    "hints": [],
    "sbg:canvas_zoom": 0.5999999999999996,
    "inputs": [
        {
            "id": "#reference_files",
            "type": [
                {
                    "name": "reference_files",
                    "type": "array",
                    "items": "File"
                }
            ],
            "sbg:x": -68.33337713612617,
            "sbg:y": 471.66093793157444,
            "label": "HISAT2 reference or TAR",
            "sbg:suggestedValue": [
                {
                    "name": "human_g1k_v37_decoy.phiX174_Homo_sapiens.GRCh37.75.spliceSites_HISAT2-2.0.1.tar",
                    "class": "File",
                    "path": "581a018d507c1732b5ac1fdd"
                }
            ]
        },
        {
            "id": "#reference",
            "type": [
                "null",
                "File"
            ],
            "sbg:x": -68.33341260751395,
            "sbg:y": -51.67252307491257,
            "sbg:fileTypes": "FASTA",
            "label": "Reference file",
            "sbg:suggestedValue": {
                "name": "human_g1k_v37_decoy.phiX174.fasta",
                "class": "File",
                "path": "5772b6da507c1752674486e8"
            }
        },
        {
            "type": [
                "null",
                "File"
            ],
            "sbg:x": -71.66668490568863,
            "sbg:y": 214.9942209056039,
            "sbg:fileTypes": "TXT",
            "label": "ss",
            "id": "#ss"
        },
        {
            "type": [
                "null",
                "File"
            ],
            "sbg:x": -71.666687581275,
            "sbg:y": 343.32755880862675,
            "sbg:fileTypes": "SNP",
            "label": "snp",
            "id": "#snp"
        },
        {
            "type": [
                "null",
                "File"
            ],
            "sbg:x": -65.00001556343557,
            "sbg:y": 609.994266721709,
            "sbg:fileTypes": "TXT",
            "label": "exon",
            "id": "#exon"
        },
        {
            "sbg:includeInPorts": true,
            "type": [
                {
                    "type": "array",
                    "items": "File"
                }
            ],
            "sbg:x": -70.00001556343557,
            "sbg:y": 84.99424309177816,
            "sbg:fileTypes": "FASTQ,FQ",
            "label": "reads",
            "id": "#fastq"
        }
    ],
    "id": "https://api.sbgenomics.com/v2/apps/bixqa/qa-load-2017-07-31-18/rna-seq-alignment-hisat2-2-0-1/6/raw/",
    "sbg:projectName": "qa-load-2017-07-31-18",
    "sbg:copyOf": "admin/sbg-public-data/rna-seq-alignment-hisat2-2-0-1/6"
}
